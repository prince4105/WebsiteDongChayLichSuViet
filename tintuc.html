<!doctype html>
<html lang="vi" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tin tức — Dòng Chảy Lịch Sử Việt</title>
  <meta name="description" content="Tin tức & bài viết mới — cập nhật theo dòng sự kiện, triển lãm, hoạt động giáo dục và bài phân tích lịch sử." />
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=Inter:wght@300;400;500;600;700&family=Dancing+Script:wght@500;700&display=swap" rel="stylesheet">
  
  <style>
    :root {
      --bg-light: #fdfbf6; /* Be kem */
      --card-light: #ffffff;
      --primary-light: #a12126; /* Đỏ đô đậm */
      --accent-light: #b48c47; /* Vàng đồng */
      --text-light: #3a2e27; /* Nâu đậm */
      --muted-light: #7a6a5f; /* Nâu xám nhạt */
      --border-light: #e5e0db; /* Xám be */
      --shadow-light: 0 12px 35px rgba(90, 70, 58, 0.1);
      --glass-light: rgba(253, 251, 246, 0.85);
      --input-bg-light: #f8f5f2;
      --pattern-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%23e5e0db' fill-opacity='0.1'%3E%3Cpath opacity='.5' d='M96 95h4v1h-4v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9zm-1 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9z'/%3E%3Cpath d='M6 6v4h4V6H6zm10 0v4h4V6h-4zm10 0v4h4V6h-4zm10 0v4h4V6h-4zm10 0v4h4V6h-4zm10 0v4h4V6h-4zm10 0v4h4V6h-4zm10 0v4h4V6h-4zM6 16v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zM6 26v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zM6 36v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zM6 46v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zM6 56v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zM6 66v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zM6 76v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zM6 86v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");

      /* === Bảng màu Dark Mode === */
      --bg-dark: #000000;
      --card-dark: #1a1816;
      --primary-dark: var(--accent-light);
      --accent-dark: #cea86a;
      --text-dark: #e0daca;
      --muted-dark: #9c938a;
      --border-dark: #3a3631;
      --shadow-dark: 0 16px 50px rgba(0, 0, 0, 0.5);
      --glass-dark: rgba(26, 24, 22, 0.85);
      --input-bg-dark: #2f2c29;
      --pattern-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%233a3631' fill-opacity='0.1'%3E%3Cpath opacity='.5' d='M96 95h4v1h-4v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9zm-1 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9z'/%3E%3Cpath d='M6 6v4h4V6H6zm10 0v4h4V6h-4zm10 0v4h4V6h-4zm10 0v4h4V6h-4zm10 0v4h4V6h-4zm10 0v4h4V6h-4zm10 0v4h4V6h-4zm10 0v4h4V6h-4zM6 16v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zM6 26v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zM6 36v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zM6 46v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zM6 56v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zM6 66v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zM6 76v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zM6 86v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");

      /* === Thiết lập ban đầu (Light) === */
      --bg: var(--bg-light); --card: var(--card-light); --primary: var(--primary-light); --accent: var(--accent-light);
      --text: var(--text-light); --muted: var(--muted-light); --border: var(--border-light); --shadow: var(--shadow-light);
      --glass-bg: var(--glass-light); --input-bg: var(--input-bg-light); --pattern: var(--pattern-light);

      --radius: 12px; --radius-sm: 8px; --maxw: 1280px; --header-height: 72px;

      /* Font Families */
      --font-body: 'Inter', system-ui, Arial, sans-serif;
      --font-heading: 'EB Garamond', serif;
      --font-display: 'Praise', cursive; /* Font thư pháp ấn tượng */
      --text-rgb: 58, 46, 39;
      --accent-rgb: 180, 140, 71;
    }
    [data-theme="dark"]{
      --bg: var(--bg-dark); --card: var(--news-bg-dark); /* Dùng nền card tối riêng */ --primary: var(--primary-dark); --accent: var(--accent-dark);
      --text: var(--text-dark); --muted: var(--muted-dark); --border: var(--border-dark); --shadow: var(--shadow-dark);
      --glass-bg: var(--glass-dark); --input-bg: var(--input-bg-dark); --pattern: var(--pattern-dark);
      --accent-rgb: 206, 168, 106; --primary-rgb: 176, 141, 87; --text-rgb: 240, 230, 216;
      color-scheme: dark;
    }
 /* === Header Cố Định Dạng Kính === */
    .sticky-header {
        position: fixed; top: 0; left: 0; width: 100%; z-index: 1000;
        background: var(--glass-bg); backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px);
        border-bottom: 1px solid var(--border); transition: background 0.3s, border 0.3s, box-shadow 0.3s;
        height: var(--header-height); display: flex; align-items: center;
        box-shadow: 0 2px 10px rgba(0,0,0,0.03);
    }
     [data-theme="dark"] .sticky-header { box-shadow: 0 4px 15px rgba(0,0,0,0.2); }

    .header-container { display: flex; justify-content: space-between; align-items: center; width: 100%; }
    .header-brand { display: flex; align-items: center; gap: 14px; color: var(--primary); transition: transform 0.2s ease-out;}
    .header-brand:hover { transform: scale(2.03); }
    .header-logo-icon {
        width: 48px; height: 48px; border-radius: 10px;
        background: linear-gradient(135deg, var(--primary-light), #801a1e);
        color: #fff; font-weight: 700; font-size: 1.1rem;
        display: flex; align-items: center; justify-content: center;
        box-shadow: 0 5px 15px rgba(161, 33, 38, 0.25);
        transition: transform 0.2s ease-out;
    }
    .header-brand:hover .header-logo-icon { transform: rotate(-5deg); }
    [data-theme="dark"] .header-logo-icon {
        background: linear-gradient(135deg, var(--accent-dark), var(--accent-light));
        color: var(--bg-dark); box-shadow: 0 6px 20px rgba(180, 140, 71, 0.3);
    }
    .header-logo-text { font-family: var(--font-heading); font-size: 1.7rem; font-weight: 700; margin-left: 0; color: var(--text);}
    .header-logo-text .muted { font-size: 0.9rem; font-weight: 400; font-family: var(--font-body); display: block; margin-top: -5px; color: var(--muted);}


    .main-navigation ul { display: flex; gap: 8px; list-style: none; margin: 0; padding: 0; }
    .main-navigation a {
        display: block; padding: 10px 18px; font-weight: 500; color: var(--muted); border-radius: 8px;
        transition: background 0.2s, color 0.2s, transform 0.2s; font-size: 1rem; position: relative;
    }
    .main-navigation a:hover { background: var(--glass-bg); color: var(--primary); transform: translateY(-2px); }
    .main-navigation a.active-page { color: var(--primary); font-weight: 600; background: transparent; }
    .main-navigation a.active-page::after {
        content: ''; position: absolute; bottom: 5px; left: 18px; right: 18px; height: 3px;
        background: var(--primary); border-radius: 1.5px;
        animation: slideIn 0.3s ease-out;
    }
    @keyframes slideIn { from { width: 0; left: 50%; } to { width: calc(100% - 36px); left: 18px; } }
    [data-theme="dark"] .main-navigation a.active-page { color: var(--primary); }
    [data-theme="dark"] .main-navigation a.active-page::after { background: var(--primary); }

    .header-actions { display: flex; align-items: center; gap: 12px; }
    .icon-btn{
        background: transparent; border: 1px solid var(--border); padding: 12px;
        border-radius: 10px; color: var(--muted); cursor: pointer;
        transition: all 0.2s ease-out; line-height: 1; display: flex;
        align-items: center; justify-content: center; position: relative;
    }
    .icon-btn:hover { background: var(--glass-bg); border-color: var(--primary); color: var(--primary); transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0,0,0,0.05);}
    .icon-btn svg { width: 18px; height: 18px; }
    [data-theme="dark"] .icon-btn { border-color: var(--border); }

 /* Base Styles */
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:var(--font-body);
      background-color:var(--bg);
      background-image:var(--pattern);
      color:var(--text);
      padding-top:var(--header-height);
      line-height:1.7;
    }
    h1, h3 { font-family: var(--font-heading); color: var(--text); font-weight: 600; line-height: 1.3; }
       .page-title-area {
        margin-bottom: 32px; text-align: center; position: relative; padding: 20px 0;
    }
    h1.page-title {
        margin: 0 0 16px 0; color: var(--text); font-family: var(--font-display);
        font-size: 3rem; font-weight: 400; line-height: 1.1; letter-spacing: 1px; color: var(--primary);
    }
    h3.section-title {
        font-family: var(--font-script); /* THAY ĐỔI FONT */
        font-size: 2.2rem;
        color: var(--primary);
        font-weight: 700;
        margin: 0;
    }

    a{color:var(--primary); text-decoration: none; transition: color 0.2s, opacity 0.2s;}
    a:hover { opacity: 0.9; color: var(--accent); }
    .wrap{max-width:var(--maxw);margin:0 auto; padding:0 40px;}
    /* Controls */
    .controls{display:flex;gap:14px;align-items:center}
    
    /* Buttons */
    .btn{
        background:var(--primary); color:#fff; padding:10px 20px; border-radius:var(--radius-sm); border:0; font-weight:600; cursor:pointer; 
        transition: all 0.25s ease-out; box-shadow: 0 4px 12px rgba(var(--primary-rgb), 0.2); font-size: 0.95rem;
    }
    .btn:hover { filter: brightness(1.1); transform: translateY(-1px); box-shadow: 0 6px 15px rgba(var(--primary-rgb), 0.3); }
    [data-theme="dark"] .btn { background: var(--primary); color: var(--bg-dark); box-shadow: 0 5px 15px rgba(var(--primary-rgb), 0.25); }

    .icon-btn{
        background: transparent; border: 1px solid var(--border); padding: 10px; border-radius: var(--radius-sm); 
        color: var(--muted); cursor: pointer; transition: all 0.25s ease-out; line-height: 1; 
        display: flex; align-items: center; justify-content: center;
    }
    .icon-btn:hover { background: var(--input-bg); border-color: var(--primary); color: var(--primary); }
    [data-theme="dark"] .icon-btn { border-color: var(--border-dark); }
    [data-theme="dark"] .icon-btn:hover { background: var(--card-dark); border-color: var(--primary); color: var(--primary); }
    
    /* Main Content (Hiệu ứng khác biệt) */
    main.card{
        background:var(--news-bg-light); /* Nền card sáng */
        padding: 40px; 
        border-radius:var(--radius);
        box-shadow:var(--shadow); 
        border: 1px solid var(--border);
        transition: background 0.3s, border 0.3s, box-shadow 0.3s;
    }
    [data-theme="dark"] main.card { background: var(--news-bg-dark); border-color: var(--border-dark); box-shadow: var(--shadow-dark); }

    /* === THAY ĐỔI: GIM TOOLBAR (STICKY) === */
    .sticky-toolbar {
        position: sticky;
        top: var(--header-height); /* Dính ngay dưới header */
        z-index: 900; /* Dưới header (1000) */
        background: var(--glass-bg);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border-bottom: 1px solid var(--border);
        padding: 16px 0;
        /* margin-bottom: 0 !important; Xóa margin cũ (đã loại bỏ thuộc tính margin-bottom khỏi .toolbar) */
    }
    [data-theme="dark"] .sticky-toolbar { border-bottom-color: var(--border-dark); }

  /* Toolbar & Filters - Sử dụng lại CSS từ vanhoa.html */
    .toolbar{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-bottom:12px; padding-bottom: 12px; border-bottom: 1px solid var(--border);}
    .search{flex:1;display:flex;gap:8px;}
    .search input{
        flex:1; padding:10px; border-radius:10px; border:1px solid var(--border);
        background: var(--input-bg); color:inherit; font-size: 1rem; transition: all 0.2s;
        box-shadow: inset 0 1px 3px rgba(0,0,0,0.05); font-family: var(--font-body);
    }
    .search input:focus { outline: none; border-color: var(--primary); background: var(--card); box-shadow: 0 0 0 4px rgba(var(--primary-rgb, 161, 33, 38), 0.1), inset 0 1px 2px rgba(0,0,0,0.06); }
    :root { --primary-rgb: 161, 33, 38; } [data-theme="dark"] { --primary-rgb: 180, 140, 71; }
    [data-theme="dark"] .search input{border-color: var(--border); background: var(--input-bg);}

    .filters{display:flex;gap:8px;align-items:center;flex-wrap:wrap; font-family: var(--font-body);}
    .filter-btn{
        padding:8px 10px; border-radius:10px; border:1px solid var(--border); background: var(--glass-bg);
        cursor:pointer; font-weight: 500; color: var(--muted); transition: all 0.2s ease-out;
    }
    .filter-btn:hover { border-color: var(--accent); color: var(--accent); background: transparent; }
    .filter-btn.active{
        background: var(--primary); color: #fff; border-color: var(--primary);
        font-weight: 600; box-shadow: 0 4px 10px rgba(161, 33, 38, 0.2);
    }
    [data-theme="dark"] .filter-btn.active { background: var(--primary); color: var(--bg-dark); box-shadow: 0 4px 10px rgba(180, 140, 71, 0.2); }


    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;margin-top:20px}
    .article{
        background:var(--news-card-light); /* Nền bài viết sáng */
        padding:18px;
        border-radius:var(--radius);
        border:1px solid var(--accent); /* Viền màu accent để nổi bật */
        display:flex;flex-direction:column;gap:10px;
        transition: all 0.3s ease-out;
        box-shadow: 0 8px 18px rgba(var(--accent-rgb), 0.1);
    }
    .article:hover { transform: translateY(-3px); box-shadow: 0 12px 28px rgba(var(--accent-rgb), 0.2); border-color: var(--primary); }
    [data-theme="dark"] .article { 
        background: var(--news-card-dark); 
        border-color: var(--primary); 
        box-shadow: 0 8px 18px rgba(var(--primary-rgb), 0.2);
    }
    [data-theme="dark"] .article:hover { border-color: var(--accent); box-shadow: 0 12px 28px rgba(var(--primary-rgb), 0.4); }

    .article img{width:100%;height:180px;object-fit:cover;border-radius:var(--radius-sm); margin-bottom: 8px;}
    .article strong { font-family: var(--font-heading); font-size: 1.25rem; color: var(--text); font-weight: 600; line-height: 1.4; }
    .meta{font-size:0.9rem;color:var(--muted)}
    .tag{display:inline-block;padding:4px 8px;border-radius:999px;background:var(--input-bg);font-weight:500;color:var(--muted);margin-right:4px;margin-top:4px; font-size: 0.85rem;}
    [data-theme="dark"] .tag { background: var(--input-bg-dark); }
    .pagination{display:flex;gap:8px;justify-content:center;align-items:center;margin-top:24px}
    .page-btn{
        padding:8px 12px;border-radius:var(--radius-sm);border:1px solid var(--border);
        background:var(--input-bg);cursor:pointer;transition: all 0.2s;
    }
    .page-btn:hover:not(:disabled) { background: var(--primary); color: #fff; border-color: var(--primary); }
    .page-btn:disabled { opacity: 0.5; cursor: not-allowed; }

    /* article list view */
    .list-view .grid{grid-template-columns:1fr}
    .list-view .article {
        display: grid; grid-template-columns: 200px 1fr; gap: 20px; align-items: center;
        padding: 24px;
    }
    .list-view .article img { height: 160px; margin-bottom: 0; }
    .list-view .article > div:first-of-type { display: flex; flex-direction: column; }
    .list-view .article .btn { margin-top: 8px; }

    /* article modal */
    .modal{position:fixed;inset:0;background:rgba(20, 18, 16, 0.9); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); display:flex;align-items:center;justify-content:center;z-index:9999;padding:24px;display:none}
    .modal-card{
        background:var(--card);padding:32px;border-radius:var(--radius);max-width:900px;width:94%;max-height:90vh;
        overflow:auto; box-shadow: var(--shadow-dark); border: 1px solid var(--border);
    }
    [data-theme="dark"] .modal-card { background: var(--card-dark); border-color: var(--border-dark); }
    .modal-header { display:flex;justify-content:space-between;align-items:flex-start;padding-bottom:12px; border-bottom: 1px solid var(--border); margin-bottom: 12px; }
    .modal-header h3 { margin: 0; font-family: var(--font-heading); font-size: 1.8rem; color: var(--primary); line-height: 1.3; }
    .close-btn{background:transparent;border:0;font-size:30px;cursor:pointer; color: var(--muted); line-height: 1; padding: 0; transition: color 0.2s, transform 0.2s;}
    .close-btn:hover { color: var(--primary); transform: rotate(90deg) scale(1.1); }
    .modal-body p { margin-bottom: 1em; color: var(--muted); font-size: 1.05rem; }
    
    /* Latest Row */
    #latest-row strong { font-family: var(--font-heading); font-size: 1.3rem; color: var(--text); font-weight: 600; line-height: 1.4;}
    #latest-row > div { 
        border: 1px solid var(--border); 
        background: var(--news-card-light); 
        border-radius: var(--radius-sm);
        transition: all 0.2s;
    }
    #latest-row > div:hover { border-color: var(--primary); background: var(--card); transform: translateY(-1px); }
    [data-theme="dark"] #latest-row > div { background: var(--news-card-dark); border-color: var(--border-dark); }
    [data-theme="dark"] #latest-row > div:hover { border-color: var(--accent); background: var(--input-bg-dark); }


    /* responsive */
    @media (max-width:1000px){ .grid{grid-template-columns:repeat(2,1fr)} #latest-row{grid-template-columns:1fr} }
    @media (max-width:768px){ 
        .wrap{padding:0 24px;} 
        .list-view .article { grid-template-columns: 1fr; text-align: center; } 
        .list-view .article img { height: 180px; }
    }
    @media (max-width:640px){ 
        .grid{grid-template-columns:1fr} 
        main.card{padding:24px;} 
        .toolbar{flex-direction:column;align-items:stretch;} 
        .search{width:100%} 
        .filters{justify-content:center; margin-right: 0;}
        .controls{gap:8px;}
        .header-logo-text { font-size: 1.5rem; }
       h1.page-title { font-size: 2rem; }
    }
    /* Helper class */
    .hidden { display: none !important; }
    .loading-placeholder { text-align: center; padding: 40px 0; font-style: italic; opacity: 0.7; }

/* === START: CSS Footer === */
    footer {
        margin-top: 64px;
        padding: 48px 0;
        background: var(--input-bg); /* Nền nhẹ cho footer */
        border-top: 1px solid var(--border);
        color: var(--muted);
        font-size: 0.95rem;
    }
    .footer-content {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        gap: 32px;
        max-width: var(--maxw); /* Sử dụng biến --maxw đã định nghĩa */
        margin: 0 auto;
        padding: 0 40px; /* Padding ngang khớp với .wrap */
        text-align: left;
    }
    .footer-column {
        flex: 1;
        min-width: 200px; /* Đảm bảo các cột không quá hẹp */
    }
    .footer-column h4 {
        font-family: var(--font-heading); /* Sử dụng font heading đã định nghĩa */
        font-size: 1.5rem;
        color: var(--text);
        margin: 0 0 16px 0;
        font-weight: 600;
    }
    .footer-column p, .footer-column a {
        color: var(--muted);
        text-decoration: none;
        display: block;
        margin-bottom: 10px;
        line-height: 1.6; /* Thêm line-height cho dễ đọc */
    }
    .footer-column a:hover {
        color: var(--primary); /* Sử dụng màu primary đã định nghĩa */
    }
    .footer-copyright {
        text-align: center;
        margin-top: 48px;
        padding-top: 24px;
        border-top: 1px dashed var(--border);
        font-size: 0.9rem;
    }
     /* Responsive cho footer */
    @media (max-width: 1024px) {
        .footer-content { padding: 0 24px; } /* Khớp padding wrap ở tablet */
    }
    @media (max-width: 768px) {
        .footer-content {
            flex-direction: column; /* Xếp chồng cột trên mobile */
            padding: 0 16px; /* Khớp padding wrap ở mobile nhỏ */
        }
    }
    @media (max-width: 480px) {
        .footer-content { padding: 0 12px; } /* Khớp padding wrap ở mobile rất nhỏ */
    }
    /* === END: CSS Footer === */
    /* === CSS Nút Chọn Ngôn Ngữ === */
.language-switcher {
    display: inline-flex; /* Dùng flex để căn chỉnh tốt hơn */
    align-items: center; /* Căn giữa theo chiều dọc */
    margin-left: 16px; /* Khoảng cách với phần tử trước đó */
    font-size: 0.85rem; /* Cỡ chữ nhỏ hơn một chút */
    color: var(--muted);
    border: 1px solid var(--border); /* Thêm viền nhẹ */
    border-radius: 99px; /* Bo tròn */
    padding: 2px; /* Khoảng đệm nhỏ bên trong */
    background-color: var(--input-bg); /* Nền nhẹ */
}
.lang-btn {
    background: none;
    border: none;
    padding: 4px 10px; /* Padding nút */
    cursor: pointer;
    font-weight: 500; /* Bỏ đậm mặc định */
    color: var(--muted);
    transition: all 0.2s ease-in-out;
    border-radius: 99px; /* Bo tròn nút */
    line-height: 1; /* Đảm bảo chiều cao nhất quán */
}
.lang-btn:hover {
    color: var(--primary);
    background-color: var(--glass-bg); /* Hiệu ứng kính khi hover */
}
.lang-btn.active {
    color: #fff; /* Chữ trắng khi active */
    font-weight: 600; /* Đậm hơn khi active */
    background-color: var(--primary); /* Nền màu chính khi active */
    box-shadow: 0 2px 8px rgba(var(--primary-rgb), 0.3); /* Đổ bóng nhẹ */
}
/* Thêm màu cho dấu | */
.language-switcher span {
    padding: 0 2px;
    color: var(--border);
}
/* === END CSS Nút Chọn Ngôn Ngữ === */
  </style>
  </head>
<body>
  <div class="main-layout">
    <header class="sticky-header">
         <a href="trangchu.html" class="header-brand logo-image-mode" title="Dòng Chảy Lịch Sử Việt - Trang Chủ">
  <img src="images/dclsv.png" alt="Logo website" width="196" style="padding-top: 25px;"> </a>
            <nav class="main-navigation" aria-label="Điều hướng chính">
                 <ul>
                    <li><a href="trangchu.html">Trang Chủ</a></li>
                    <li><a href="lichsu.html">Lịch Sử</a></li>
                    <li><a href="dungnuocvagiunuoc.html" >Dựng Nước & Giữ Nước</a></li>
                    <li><a href="vanhoa.html" >Văn Hóa</a></li>
                    <li><a href="khotulieu.html">Tư Liệu</a></li>
                    <li><a href="tintuc.html"class="active-page">Tin Tức</a></li>
                    <li><a href="lienhe.html">Liên Hệ & Góp ý</a></li>
                 </ul>
            </nav>
            <div class="header-actions">
                 <div class="language-switcher">
    <button id="lang-vi" class="lang-btn" data-lang="vi" data-translate-key="langVIE">VIE</button> |
    <button id="lang-en" class="lang-btn" data-lang="en" data-translate-key="langENG">ENG</button>
</div>
                 <button id="theme-toggle" class="icon-btn" title="Chuyển giao diện Sáng/Tối" aria-live="polite">
                 
                     <span class="theme-icon-light" aria-label="Chế độ sáng">☀️</span>
                     <span class="theme-icon-dark hidden" aria-label="Chế độ tối">🌙</span>
                 </button>
                  
            </div>
        
    </header>
  <div class="wrap" style="padding-top:20px;">
    <header style="margin-top:20px; text-align: center;"> <h1 class="page-title">Tin tức & Bài viết mới</h1>
        <div class="muted" style="font-size:1.1rem; margin-bottom:16px; font-family: var(--font-heading); font-style: italic; max-width: 700px; margin-left: auto; margin-right: auto;"> Cập nhật theo dòng sự kiện, triển lãm, hoạt động giáo dục và bài phân tích lịch sử.
        </div>
    </header>
  </div>
    
  <div class="sticky-toolbar">
    <div class="wrap">
      <div class="toolbar" aria-label="Tìm kiếm & bộ lọc">
          <div class="search" role="search">
            <input id="q" type="search" placeholder="Tìm bài theo tiêu đề, nội dung..." aria-label="Tìm bài">
            <button id="clear-q" class="icon-btn" title="Xóa">✕</button>
          </div>

          <div class="filters" role="toolbar" aria-label="Bộ lọc">
            <button class="filter-btn active" data-cat="all">Tất cả</button>
            <button class="filter-btn" data-cat="tin-chung">Tin chung</button>
            <button class="filter-btn" data-cat="trien-lam">Triển lãm</button>
            <button class="filter-btn" data-cat="giai-phap">Phân tích</button>
            <button class="filter-btn" data-cat="su-kien">Sự kiện</button>
          </div>

          <div style="display:flex;gap:10px;align-items:center; flex-shrink: 0;">
            <button id="new-article" class="btn">+ Viết bài (Local)</button>
            <select id="sort" title="Sắp xếp" class="filter-btn" style="padding:10px 12px">
              <option value="new">Mới nhất</option>
              <option value="popular">Phổ biến</option>
            </select>
            <button id="toggle-view" class="icon-btn" title="Danh sách / Lưới">
               <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect></svg>
            </button>
          </div>
        </div>
    </div>
  </div>


  <div class="wrap" style="padding-top: 20px;">
    <main class="card" role="main">
      <div id="list-area">
        <div class="grid" id="grid"></div>
        <div class="pagination" id="pagination"></div>
      </div>

      <hr style="margin:30px 0; border-color: var(--border); border-style: solid;" />

      <section>
        <h3 class="section-title" style="margin:0 0 16px 0;">Bài mới nhất</h3>
        <div id="latest-row" style="display:grid;grid-template-columns:repeat(3,1fr);gap:16px"></div>
      </section>
    </main>
  </div>

  <div id="modal" class="modal" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="modal-title">
      <div class="modal-header">
        <h3 id="modal-title">Tiêu đề bài</h3>
        <button id="modal-close" class="close-btn" aria-label="Đóng">✕</button>
      </div>
      <div id="modal-meta" class="muted" style="margin-top:6px"></div>
      <div id="modal-body" style="margin-top:12px"></div>
      <div style="margin-top:20px;display:flex;gap:12px;justify-content:flex-end; padding-top: 12px; border-top: 1px solid var(--border);">
        <button id="modal-bookmark" class="icon-btn">★ Lưu</button>
        <button id="modal-share" class="icon-btn">🔗 Chia sẻ</button>
      </div>
    </div>
  </div>

  <div id="editor" class="modal" aria-hidden="true" style="display:none">
    <div class="modal-card">
      <div class="modal-header">
        <h3 id="editor-title" style="font-size:1.8rem">Viết bài mới (lưu cục bộ)</h3>
        <button id="editor-close" class="close-btn">✕</button>
      </div>
      <form id="editor-form" style="margin-top:12px;display:grid;gap:12px">
        <input id="art-title" placeholder="Tiêu đề" required style="padding:12px;border:1px solid var(--border);border-radius:var(--radius-sm);background:var(--input-bg);color:var(--text)" />
        <input id="art-author" placeholder="Tác giả" style="padding:12px;border:1px solid var(--border);border-radius:var(--radius-sm);background:var(--input-bg);color:var(--text)" />
        <select id="art-cat" style="padding:12px;border:1px solid var(--border);border-radius:var(--radius-sm);background:var(--input-bg);color:var(--text)">
          <option value="tin-chung">Tin chung</option>
          <option value="trien-lam">Triển lãm</option>
          <option value="giai-phap">Phân tích</option>
          <option value="su-kien">Sự kiện</option>
        </select>
        <input id="art-tags" placeholder="Tags (phân tách bằng dấu phẩy)" style="padding:12px;border:1px solid var(--border);border-radius:var(--radius-sm);background:var(--input-bg);color:var(--text)" />
        <textarea id="art-content" rows="8" placeholder="Nội dung bài (HTML hoặc text)" style="padding:12px;border:1px solid var(--border);border-radius:var(--radius-sm);background:var(--input-bg);color:var(--text)"></textarea>
        <div style="display:flex;gap:12px;justify-content:flex-end; margin-top: 12px;">
          <button type="button" id="editor-cancel" class="icon-btn">Hủy</button>
          <button type="submit" class="btn">Lưu bài</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    (function(){
      // Sample articles (paraphrased) — editable
      const SAMPLE = [
        { id:'a1', title:'Triển lãm bản đồ cổ khai mạc ở Hà Nội', date:'2025-10-12', author:'Nhóm Dòng Chảy', category:'trien-lam', tags:['bản đồ','triển lãm'], excerpt:'Triển lãm trưng bày nhiều bản đồ quý hiếm...', content:'<p>Triển lãm trưng bày nhiều bản đồ quý hiếm từ thế kỷ 18–19. Nội dung chi tiết, chương trình sự kiện và hướng dẫn thăm quan.</p>', views:120 },
        { id:'a2', title:'Kỷ niệm Hai Bà Trưng — hoạt động giáo dục', date:'2025-02-01', author:'Ban biên tập', category:'su-kien', tags:['kỷ niệm','Hai Bà Trưng'], excerpt:'Chuỗi hoạt động giáo dục và triển lãm kỷ niệm...', content:'<p>Các hoạt động giáo dục, trưng bày tài liệu và tọa đàm về tinh thần khởi nghĩa.</p>', views:230 },
        { id:'a3', title:'Phân tích: Ý nghĩa chiến thắng Bạch Đằng', date:'2024-08-20', author:'PGS. Nguyễn A.', category:'giai-phap', tags:['Bạch Đằng','phân tích'], excerpt:'Bài viết phân tích chiến lược và hệ quả chính trị...', content:'<p>Bài viết phân tích chiến lược quân sự của Ngô Quyền và tác động lâu dài.</p>', views:410 },
        { id:'a4', title:'Hướng dẫn giáo dục lịch sử cho học sinh', date:'2025-06-05', author:'Nhóm Giáo dục', category:'tin-chung', tags:['giáo dục','học sinh'], excerpt:'Gợi ý chương trình hoạt động cho trường học...', content:'<p>Gợi ý hoạt động thực hành, tham quan di tích và bài tập theo dự án.</p>', views:90 }
      ];

      const STORAGE = 'dcl_news_v1';
      function loadArticles(){
        try{
          const s = localStorage.getItem(STORAGE);
          if(s) return JSON.parse(s);
        }catch(e){}
        return SAMPLE.slice();
      }
      function saveArticles(list){ localStorage.setItem(STORAGE, JSON.stringify(list)); }

      let ARTICLES = loadArticles();

      // DOM
      const qEl = document.getElementById('q');
      const clearQ = document.getElementById('clear-q');
      const filterBtns = document.querySelectorAll('.filter-btn');
      const grid = document.getElementById('grid');
      const pagination = document.getElementById('pagination');
      const latestRow = document.getElementById('latest-row');
      const sortSel = document.getElementById('sort');
      const toggleViewBtn = document.getElementById('toggle-view');
      const newArticleBtn = document.getElementById('new-article');
      const themeToggleBtn = document.getElementById('theme-toggle');
      const themeIconLight = document.querySelector('.theme-icon-light');
      const themeIconDark = document.querySelector('.theme-icon-dark');
      
      // modal elements
      const modal = document.getElementById('modal');
      const modalTitle = document.getElementById('modal-title');
      const modalMeta = document.getElementById('modal-meta');
      const modalBody = document.getElementById('modal-body');
      const modalClose = document.getElementById('modal-close');
      const modalBookmark = document.getElementById('modal-bookmark');
      const modalShare = document.getElementById('modal-share');

      // editor
      const editorModal = document.getElementById('editor');
      const editorClose = document.getElementById('editor-close');
      const editorForm = document.getElementById('editor-form');
      const artTitle = document.getElementById('art-title');
      const artAuthor = document.getElementById('art-author');
      const artCat = document.getElementById('art-cat');
      const artTags = document.getElementById('art-tags');
      const artContent = document.getElementById('art-content');
      const editorCancel = document.getElementById('editor-cancel');
      

      // pagination settings
      let currentPage = 1;
      const perPage = 6;
      let listView = false; // grid vs list

      // bookmarks
      const BK_KEY = STORAGE + '_bks';
      function getBks(){ try{ return JSON.parse(localStorage.getItem(BK_KEY)||'[]'); }catch(e){ return []; } }
      function saveBks(v){ localStorage.setItem(BK_KEY, JSON.stringify(v)); }

      // helpers
      function uid(prefix='a'){ return prefix + Math.random().toString(36).slice(2,9); }
      function formatDate(d){ const dt = new Date(d); return dt.toLocaleDateString(); }

      // render functions
      function renderList(page=1){
        const q = (qEl.value||'').trim().toLowerCase();
        const activeBtn = Array.from(filterBtns).find(b=>b.classList.contains('active'));
        const cat = activeBtn ? activeBtn.getAttribute('data-cat') : 'all';
        const sort = sortSel.value;

        // filter
        let list = ARTICLES.filter(a=>{
          if(cat !== 'all' && a.category !== cat) return false;
          if(!q) return true;
          return (a.title + ' ' + (a.excerpt||'') + ' ' + (a.content||'') + ' ' + (a.tags||[]).join(' ')).toLowerCase().includes(q);
        });

        // sort
        if(sort === 'new') list.sort((x,y)=> new Date(y.date) - new Date(x.date));
        else if(sort === 'popular') list.sort((x,y)=> (y.views||0) - (x.views||0));

        // pagination
        const total = list.length;
        const pages = Math.max(1, Math.ceil(total / perPage));
        currentPage = Math.min(Math.max(1, page), pages);
        const start = (currentPage -1) * perPage;
        const pageItems = list.slice(start, start + perPage);

        // render grid
        grid.innerHTML = '';
        if(list.length === 0) {
           grid.innerHTML = `<p class="muted" style="grid-column: 1 / -1; text-align: center; padding: 20px; border: 1px solid var(--border); border-radius: var(--radius); background: var(--input-bg);">Không tìm thấy bài viết nào phù hợp.</p>`;
        }
        pageItems.forEach(a=>{
          const el = document.createElement('article');
          el.className = 'article';
          let img = '';
          // choose thumbnail based on tags or fallback
          img = 'https://icolor.vn/wp-content/uploads/2024/08/co-nuoc-viet-nam-la-gi-e1667528714698.jpg';
          el.innerHTML = `<img src="${img}" alt="${a.title}">
            <div><strong>${a.title}</strong></div>
            <div class="meta">${formatDate(a.date)} • ${a.author || 'Ban biên tập'} • <span class="muted">${a.category}</span></div>
            <p class="muted">${a.excerpt || ''}</p>
            <div style="margin-top:auto;display:flex;gap:8px;align-items:center; flex-wrap: wrap;">
              <button class="btn view-article" data-id="${a.id}">Xem</button>
              <button class="icon-btn save-article" data-id="${a.id}">${getSaved().includes(a.id) ? '✓' : '★'}</button>
              ${(a.tags||[]).map(t=>`<span class="tag">${t.trim()}</span>`).join(' ')}
            </div>`;
          grid.appendChild(el);
        });

        // pagination UI
        pagination.innerHTML = '';
        if(pages > 1){
          const prev = document.createElement('button'); prev.className='page-btn'; prev.textContent='‹'; prev.disabled = currentPage===1;
          prev.addEventListener('click', ()=> renderList(currentPage-1));
          pagination.appendChild(prev);
          for(let p=1;p<=pages;p++){
            const b = document.createElement('button'); b.className='page-btn'; b.textContent = p; if(p===currentPage) b.style.fontWeight='700';
            b.addEventListener('click', ()=> renderList(p));
            pagination.appendChild(b);
          }
          const next = document.createElement('button'); next.className='page-btn'; next.textContent='›'; next.disabled = currentPage===pages;
          next.addEventListener('click', ()=> renderList(currentPage+1));
          pagination.appendChild(next);
        }

        // latest row
        renderLatest();

        // apply list view class
        document.getElementById('list-area').classList.toggle('list-view', listView);
      }

      function renderLatest(){
        latestRow.innerHTML = '';
        const sorted = ARTICLES.slice().sort((a,b)=> new Date(b.date)-new Date(a.date)).slice(0,3);
        sorted.forEach(a=>{
          const c = document.createElement('div');
          c.style = 'background:var(--news-card-light);padding:16px;border-radius:var(--radius-sm); border: 1px solid var(--border);';
          c.innerHTML = `<strong>${a.title}</strong><div class="muted" style="margin-top:6px">${formatDate(a.date)} • ${a.author || 'Ban biên tập'}</div><p class="muted" style="margin-top:8px; line-height: 1.5; font-size:0.95rem;">${a.excerpt||''}</p><div style="margin-top:12px"><button class="btn view-article" data-id="${a.id}">Xem</button></div>`;
          latestRow.appendChild(c);
        });
      }

      // events
      qEl.addEventListener('input', ()=> renderList(1));
      clearQ.addEventListener('click', ()=> { qEl.value=''; renderList(1); qEl.focus(); });

      filterBtns.forEach(b=>{
        b.addEventListener('click', ()=> {
          filterBtns.forEach(x=>x.classList.remove('active'));
          b.classList.add('active');
          renderList(1);
        });
      });

      sortSel.addEventListener('change', ()=> renderList(1));

      toggleViewBtn.addEventListener('click', ()=> { 
        listView = !listView; 
        toggleViewBtn.innerHTML = listView 
          ? `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>` 
          : `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect></svg>`;
        renderList(currentPage); 
      });

      // new article flow (local)
      newArticleBtn.addEventListener('click', ()=> {
        editorModal.style.display = 'flex';
        editorModal.setAttribute('aria-hidden','false');
        editorForm.reset();
      });
      editorClose.addEventListener('click', ()=> { editorModal.style.display='none'; editorModal.setAttribute('aria-hidden','true'); });
      editorCancel.addEventListener('click', ()=> { editorModal.style.display='none'; editorModal.setAttribute('aria-hidden','true'); });

      editorForm.addEventListener('submit', (e)=>{
        e.preventDefault();
        const newA = {
          id: uid('a'),
          title: artTitle.value.trim() || 'Bài mới',
          author: artAuthor.value.trim() || 'Khách',
          category: artCat.value,
          tags: (artTags.value||'').split(',').map(s=>s.trim()).filter(Boolean),
          excerpt: (artContent.value||'').slice(0,150) + '...',
          content: artContent.value,
          date: new Date().toISOString().slice(0,10),
          views: 0
        };
        ARTICLES.unshift(newA);
        saveArticles(ARTICLES);
        editorModal.style.display='none';
        alert('Đã lưu bài mới (chỉ lưu cục bộ trên trình duyệt).');
        renderList(1);
      });

      // view article (modal)
      document.addEventListener('click', (e)=>{
        const v = e.target.closest('.view-article');
        const s = e.target.closest('.save-article');
        if(v){
          const id = v.getAttribute('data-id');
          openArticle(id);
        }
        if(s){
          const id = s.getAttribute('data-id');
          toggleSave(id);
          s.textContent = getSaved().includes(id) ? '✓' : '★';
        }
      });

      function openArticle(id){
        const a = ARTICLES.find(x=>x.id === id);
        if(!a) return alert('Không tìm thấy bài viết.');
        modalTitle.textContent = a.title;
        modalMeta.textContent = `${formatDate(a.date)} • ${a.author || 'Ban biên tập'} • ${a.category}`;
        modalBody.innerHTML = a.content || '<p class="muted">Không có nội dung chi tiết.</p>';
        modal.style.display='flex';
        modal.setAttribute('aria-hidden','false');

        // views increment (local)
        a.views = (a.views || 0) + 1;
        saveArticles(ARTICLES);

        document.getElementById('modal-bookmark').textContent = getSaved().includes(id) ? '✓ Đã lưu' : '★ Lưu';
        document.getElementById('modal-share').onclick = ()=> {
          const url = location.origin + location.pathname + '?article=' + encodeURIComponent(id);
          if(navigator.share) navigator.share({title:a.title, text:a.excerpt || '', url}).catch(()=> navigator.clipboard && navigator.clipboard.writeText(url));
          else navigator.clipboard && navigator.clipboard.writeText(url).then(()=> alert('Đã copy link bài'), ()=> alert(url));
        };
      }

      document.getElementById('modal-close').addEventListener('click', ()=> { modal.style.display='none'; modal.setAttribute('aria-hidden','true'); });

      // bookmarks (saved articles)
      function getSaved(){ try{ return JSON.parse(localStorage.getItem(BK_KEY)||'[]'); }catch(e){ return []; } }
      function saveSaved(list){ localStorage.setItem(BK_KEY, JSON.stringify(list)); }
      function toggleSave(id){
        let s = getSaved();
        if(s.includes(id)) s = s.filter(x=>x!==id);
        else s.push(id);
        saveSaved(s);
        alert(s.includes(id) ? 'Đã lưu bài' : 'Đã bỏ lưu');
      }

      // modal bookmark button
      modalBookmark.addEventListener('click', ()=>{
        // bookmark current article in modal
        const id = ARTICLES.find(a=>a.title === modalTitle.textContent)?.id;
        if(id) { toggleSave(id); modalBookmark.textContent = getSaved().includes(id) ? '✓ Đã lưu' : '★ Lưu'; }
      });

      // keyboard close
      document.addEventListener('keydown', (e)=> { if(e.key === 'Escape'){ modal.style.display='none'; modal.setAttribute('aria-hidden','true'); editorModal.style.display='none'; editorModal.setAttribute('aria-hidden','true'); } });

      // helper: deep link ?article=id open
      (function applyQuery(){
        const params = new URLSearchParams(location.search);
        const aid = params.get('article');
        if(aid){ setTimeout(()=> openArticle(aid), 400); }
      })();

      // theme toggle
      function applyTheme(theme) {
          document.documentElement.setAttribute('data-theme', theme);
          localStorage.setItem('dcl_theme', theme);
          if (themeIconLight && themeIconDark) {
               themeIconLight.classList.toggle('hidden', theme === 'dark');
               themeIconDark.classList.toggle('hidden', theme === 'light');
          }
      }
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      const stored = localStorage.getItem('dcl_theme') || (prefersDark ? 'dark' : 'light');
      applyTheme(stored);
      themeToggleBtn.addEventListener('click', ()=>{
        const cur = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light':'dark';
        applyTheme(cur);
      });
      
      // initial render
      renderList(1);
      
    })();
  </script>
  <footer>
      <div class="footer-content">
          <div class="footer-column">
              <h4>Giới thiệu</h4>
              <p>Trang web "Dòng Chảy Lịch Sử" cung cấp thông tin tóm tắt về lịch sử Việt Nam qua các thời kỳ, phục vụ mục đích tham khảo và học tập.</p>
          </div>
          <div class="footer-column">
              <h4>Liên hệ</h4>
              <a href="mailto:info@lichsuviet.vn">Email: info@lichsuviet.vn</a>
              <a href="tel:+84123456789">Điện thoại: (012) 345-6789</a>
              <p>Địa chỉ: 123 Đường ABC, Hà Nội</p>
          </div>
          <div class="footer-column">
              <h4>Hỗ trợ</h4>
              <a href="faq.html">Câu hỏi thường gặp</a>
              <a href="lienhe.html">Góp ý nội dung</a>
              <a href="policy.html">Chính sách bảo mật</a>
          </div>
      </div>
     <div class="wrap"> <div class="footer-copyright">
                 <p class="muted" style="color: red; font-weight: bold; font-size: 20px; text-align: center;">
  🇻🇳 Hoàng Sa, Trường Sa là của Việt Nam 🇻🇳
</p>

                        <p class="muted">© Dòng Chảy Lịch Sử Việt . Made by Bùi Lê Hậu . Thông tin tổng hợp cho mục đích tham khảo.</p>
                        
                    </div>
                </div>
  </footer>
</body>
</html>