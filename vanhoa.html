<!doctype html>
<html lang="vi" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Truyền thống & Văn hóa — Dòng Chảy Lịch Sử Việt</title>
  <meta name="description" content="Khám phá Lễ hội, phong tục, nghệ thuật dân gian, ẩm thực và làng nghề Việt Nam — Tổng hợp hình ảnh và thông tin chi tiết." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=Inter:wght@300;400;500;600;700&family=Praise&display=swap" rel="stylesheet">
  <style>
    :root {
      /* === Bảng màu Light Mode === */
      --bg-light: #fdfbf6; /* Be kem */
      --card-light: #ffffff;
      --primary-light: #a12126; /* Đỏ đô đậm */
      --accent-light: #b48c47; /* Vàng đồng */
      --text-light: #3a2e27; /* Nâu đậm */
      --muted-light: #7a6a5f; /* Nâu xám nhạt */
      --border-light: #e5e0db; /* Xám be */
      --shadow-light: 0 12px 35px rgba(90, 70, 58, 0.1); /* Shadow đậm hơn */
      --glass-light: rgba(253, 251, 246, 0.85); /* Nền kính sáng */
      --input-bg-light: #f8f5f2;
      /* Họa tiết vân mây nhẹ */
      --pattern-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%23e5e0db' fill-opacity='0.1'%3E%3Cpath opacity='.5' d='M96 95h4v1h-4v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9zm-1 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9z'/%3E%3Cpath d='M6 6v4h4V6H6zm10 0v4h4V6h-4zm10 0v4h4V6h-4zm10 0v4h4V6h-4zm10 0v4h4V6h-4zm10 0v4h4V6h-4zm10 0v4h4V6h-4zm10 0v4h4V6h-4zM6 16v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zM6 26v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zM6 36v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zM6 46v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zM6 56v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zM6 66v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zM6 76v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zM6 86v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");

      /* === Bảng màu Dark Mode === */
      --bg-dark: #000000; /* Đen tuyền */
      --card-dark: #1a1816; /* Xám đen đậm hơn */
      --primary-dark: var(--accent-light); /* Vàng đồng */
      --accent-dark: #cea86a; /* Vàng đồng sáng hơn */
      --text-dark: #e0daca; /* Be sáng */
      --muted-dark: #9c938a; /* Xám be nhạt */
      --border-dark: #3a3631; /* Nâu xám đậm hơn */
      --shadow-dark: 0 16px 50px rgba(0, 0, 0, 0.5); /* Shadow mạnh hơn */
      --glass-dark: rgba(26, 24, 22, 0.85); /* Nền kính tối */
      --input-bg-dark: #2f2c29;
      --pattern-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%233a3631' fill-opacity='0.1'%3E%3Cpath opacity='.5' d='M96 95h4v1h-4v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9zm-1 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9z'/%3E%3Cpath d='M6 6v4h4V6H6zm10 0v4h4V6h-4zm10 0v4h4V6h-4zm10 0v4h4V6h-4zm10 0v4h4V6h-4zm10 0v4h4V6h-4zm10 0v4h4V6h-4zm10 0v4h4V6h-4zM6 16v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zM6 26v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zM6 36v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zM6 46v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zM6 56v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zM6 66v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zM6 76v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zM6 86v4h4v-4H6zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4zm10 0v4h4v-4h-4z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");

      /* === Thiết lập ban đầu (Light) === */
      --bg: var(--bg-light); --card: var(--card-light); --primary: var(--primary-light); --accent: var(--accent-light);
      --text: var(--text-light); --muted: var(--muted-light); --border: var(--border-light); --shadow: var(--shadow-light);
      --glass-bg: var(--glass-light); --input-bg: var(--input-bg-light); --pattern: var(--pattern-light);

      --radius: 12px; --radius-sm: 8px; --maxw: 1280px; --header-height: 72px;

      /* Font Families */
      --font-body: 'Inter', system-ui, Arial, sans-serif;
      --font-heading: 'EB Garamond', serif;
      --font-display: 'Praise', cursive; /* Font thư pháp ấn tượng */
    }
    [data-theme="dark"]{
      --bg: var(--bg-dark); --card: var(--card-dark); --primary: var(--primary-dark); --accent: var(--accent-dark);
      --text: var(--text-dark); --muted: var(--muted-dark); --border: var(--border-dark); --shadow: var(--shadow-dark);
      --glass-bg: var(--glass-dark); --input-bg: var(--input-bg-dark); --pattern: var(--pattern-dark);
    }
    *, *::before, *::after { box-sizing: border-box; }
    html{scroll-behavior:smooth}
    body{
        margin:0; padding: 0; font-family: var(--font-body); background-color: var(--bg);
        background-image: var(--pattern); color: var(--text); transition: background 0.3s, color 0.3s;
        padding-top: var(--header-height); font-size: 16px; line-height: 1.7; /* Tăng line-height hơn nữa */
        -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
    }
    a{color:var(--primary);text-decoration:none; transition: color 0.2s ease-out, opacity 0.2s ease-out;}
    a:hover { color: var(--accent); opacity: 0.85; text-decoration: none;} /* Bỏ gạch chân mặc định */
    img { max-width: 100%; height: auto; display: block; border-radius: var(--radius-sm); }

    .wrap{max-width:var(--maxw); margin:0 auto; padding: 0 40px;} /* Tăng padding wrap */

    /* === Header Cố Định Dạng Kính === */
    .sticky-header {
        position: fixed; top: 0; left: 0; width: 100%; z-index: 1000;
        background: var(--glass-bg); backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px); /* Blur mạnh hơn */
        border-bottom: 1px solid var(--border); transition: background 0.3s, border 0.3s, box-shadow 0.3s;
        height: var(--header-height); display: flex; align-items: center;
        box-shadow: 0 2px 10px rgba(0,0,0,0.03); /* Thêm shadow nhẹ */
    }
     [data-theme="dark"] .sticky-header { box-shadow: 0 4px 15px rgba(0,0,0,0.2); }

    .header-container { display: flex; justify-content: space-between; align-items: center; width: 100%; }
    .header-brand { display: flex; align-items: center; gap: 14px; color: var(--primary); transition: transform 0.2s ease-out;}
    .header-brand:hover { transform: scale(2.03); } /* Hiệu ứng hover logo */
    .main-navigation ul { display: flex; gap: 8px; list-style: none; margin: 0; padding: 0; }
    .main-navigation a {
        display: block; padding: 10px 18px; font-weight: 500; color: var(--text); border-radius: 8px;
        transition: background 0.2s, color 0.2s, transform 0.2s; font-size: 1rem; position: relative;
    }
    .main-navigation a:hover { background: var(--glass); color: var(--primary); transform: translateY(-2px); }
    .main-navigation a.active-page { color: var(--primary); font-weight: 600; background: transparent; }
    .main-navigation a.active-page::after {
        content: ''; position: absolute; bottom: 5px; left: 18px; right: 18px; height: 3px;
        background: var(--primary); border-radius: 1.5px;
        animation: slideIn 0.3s ease-out; /* Hiệu ứng gạch chân */
    }
    @keyframes slideIn { from { width: 0; left: 50%; } to { width: calc(100% - 36px); left: 18px; } }
    [data-theme="dark"] .main-navigation a.active-page { color: var(--primary); }
    [data-theme="dark"] .main-navigation a.active-page::after { background: var(--primary); }

    .header-actions { display: flex; align-items: center; gap: 12px; }
    .icon-btn{
        background: transparent; border: 1px solid var(--border); padding: 12px; /* Lớn hơn */
        border-radius: 10px; color: var(--muted); cursor: pointer;
        transition: all 0.2s ease-out; line-height: 1; display: flex;
        align-items: center; justify-content: center; position: relative;
    }
    .icon-btn:hover { background: var(--glass); border-color: var(--primary); color: var(--primary); transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0,0,0,0.05);}
    .icon-btn svg { width: 18px; height: 18px; } /* Kích thước icon chuẩn */

    #theme-toggle .theme-icon-dark, #theme-toggle .theme-icon-light { transition: opacity 0.3s; }

    /* Nội dung chính */
    .content-area { padding: 64px 0; } /* Tăng padding */

    /* Page Header */
    .page-header {
        margin-bottom: 48px; text-align: center; position: relative; padding: 20px 0;
    }
     .page-header::before, .page-header::after { /* Đường kẻ trang trí */
        content: ''; position: absolute; left: 50%; width: 100px; height: 1px;
        background: linear-gradient(to right, transparent, var(--accent), transparent);
        transform: translateX(-50%);
    }
    .page-header::before { top: 0; }
    .page-header::after { bottom: 0; }

    h1.page-title{
        margin:0 0 16px 0; color:var(--text); font-family: var(--font-display); /* Font thư pháp */
        font-size: 5rem; /* Rất lớn */ font-weight: 400; /* Thường font thư pháp chỉ có weight 400 */
        line-height: 1.1; letter-spacing: 1px; color: var(--primary);
    }
    .page-subtitle{color:var(--muted); font-size: 1.2rem; max-width: 700px; margin: 0 auto; line-height: 1.8; font-family: var(--font-heading); font-style: italic;}


    /* Main Card */
    main.card{
        background:var(--card); padding: 48px; border-radius:var(--radius);
        box-shadow:var(--shadow); border: 1px solid var(--border);
        transition: background 0.3s, border 0.3s;
        background-image: var(--pattern); background-size: 80px 80px; /* Họa tiết lớn hơn */
        background-blend-mode: multiply; /* Hòa trộn họa tiết */
        position: relative; /* Cho họa tiết trang trí góc */
    }
    
    .controls-container { display: flex; flex-direction: column; gap: 24px; margin-bottom: 40px; padding-bottom: 32px; border-bottom: 1px solid var(--border); }
    .search-bar{display:flex;gap:12px;}
    .search-bar input{
        flex:1; padding:16px 20px; border-radius: var(--radius-sm); border: 1px solid var(--border);
        background: var(--input-bg); color:inherit; font-size: 1rem; transition: all 0.2s;
        box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
    }
     .search-bar input:focus {
        outline: none; border-color: var(--primary); background: var(--card);
        box-shadow: 0 0 0 4px var(--glass), inset 0 1px 2px rgba(0,0,0,0.06);
    }
    .filters{display:flex;gap:12px;flex-wrap:wrap;}
    .tag{ /* Giống thẻ tre/dấu triện */
        padding: 10px 20px; border-radius: var(--radius-sm); background: transparent; /* Nền trong */
        cursor: pointer; font-weight: 500; color: var(--muted);
        border: 1px solid var(--border); transition: all 0.2s ease-out;
        font-size: 0.95rem; letter-spacing: 0.3px; position: relative; overflow: hidden;
    }
    .tag::before { /* Hiệu ứng nền chạy khi hover */
        content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
        background: var(--glass); z-index: -1; transition: left 0.3s ease-out;
    }
    .tag:hover::before { left: 0; }
    .tag:hover { border-color: var(--accent); color: var(--accent); }
    .tag.active{
        background: var(--primary); color: #fff; border-color: var(--primary);
        font-weight: 600; box-shadow: 0 5px 15px rgba(161, 33, 38, 0.2);
    }
    .tag.active::before { display: none; } /* Bỏ hiệu ứng hover khi active */
    [data-theme="dark"] .tag.active { color: var(--bg-dark); box-shadow: 0 5px 15px rgba(180, 140, 71, 0.25); }
    [data-theme="dark"] .tag:hover { color: var(--primary); border-color: var(--primary); }


    /* Layout Grid */
    .grid{display:grid;grid-template-columns:minmax(0, 2.5fr) minmax(0, 1fr);gap:48px;align-items:start}
    .section{margin-bottom:56px}
    .section h2 {
        font-family: var(--font-display); font-size: 3.2rem; /* Lớn hơn */
        color: var(--text); margin: 0 0 16px 0; padding-bottom: 16px;
        border-bottom: 1px solid var(--border); position: relative; font-weight: 400; /* Thường font thư pháp là 400 */
        line-height: 1.2;
    }
    .section h2::after { content: none; } /* Bỏ đường kẻ cũ */
    /* Thêm đường lượn sóng */
     .section h2::before {
        content: ''; position: absolute; bottom: -2px; left: 0;
        width: 80px; height: 4px;
        background-image: linear-gradient(90deg, var(--primary) 50%, transparent 50%);
        background-size: 6px 3px;
        opacity: 0.8;
    }
    .section > p.muted { font-size: 1.05rem; margin-bottom: 32px; line-height: 1.8; color: var(--muted); font-family: var(--font-heading); font-style: italic;}


    /* Cards List */
    .cards{display:grid;grid-template-columns:repeat(auto-fit, minmax(320px, 1fr));gap:32px} /* Tăng minmax và gap */
    .card-item{
        padding: 0; border-radius: var(--radius); background: var(--card);
        border: 1px solid var(--border); box-shadow: var(--shadow-light); /* Luôn có shadow nhẹ */
        transition: transform 0.3s ease-out, box-shadow 0.3s ease-out;
        overflow: hidden; display: flex; flex-direction: column; position: relative;
    }
     .card-item:hover { transform: translateY(-8px) scale(1.02); box-shadow: var(--shadow); }

    .card-item-image-link { display: block; position: relative; overflow: hidden; border-radius: var(--radius) var(--radius) 0 0;}
    .card-item-image { width: 100%; height: 240px; object-fit: cover; display: block; transition: transform 0.4s ease-out; border-bottom: 1px solid var(--border); }
    .card-item:hover .card-item-image { transform: scale(1.05); }

    .card-item-content { padding: 28px; flex-grow: 1; display: flex; flex-direction: column; }
    .card-item h3{
        margin: 0 0 8px 0; font-family: var(--font-heading); font-size: 1.7rem;
        color: var(--text); line-height: 1.35;
    }
    .card-item .meta{font-size:0.9rem;color:var(--muted); margin-bottom: 12px; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px;}
    .card-item .description { margin: 0 0 20px 0; line-height: 1.7; font-size: 1rem; color: var(--muted); flex-grow: 1; }
    .card-item .actions { margin-top: auto; display: flex; justify-content: space-between; align-items: center; }
    .card-item .actions .left { display: flex; gap: 10px; align-items: center; }

    /* Nút chính */
    .btn{
        background: var(--primary); color: #fff;
        padding: 12px 24px; border-radius: 8px; border:0;
        font-weight: 600; cursor:pointer; transition: all 0.25s ease-out;
        display: inline-flex; align-items: center; gap: 8px; font-size: 0.95rem;
        box-shadow: 0 4px 10px rgba(161, 33, 38, 0.15); text-transform: uppercase; letter-spacing: 0.5px;
    }
    .btn:hover { transform: translateY(-3px); filter: brightness(1.1); box-shadow: 0 8px 20px rgba(161, 33, 38, 0.25); }
    [data-theme="dark"] .btn { color: var(--bg-dark); box-shadow: 0 5px 15px rgba(180, 140, 71, 0.2); }
    [data-theme="dark"] .btn:hover { box-shadow: 0 8px 25px rgba(180, 140, 71, 0.35); }


    /* Badges */
    .badgelist{display:flex;gap:10px;flex-wrap:wrap; margin-top: 16px;}
    .badge{ /* Giống con dấu nhỏ */
        background:transparent; padding: 6px 14px; border-radius: 4px;
        font-weight: 500; color: var(--muted); font-size: 0.8rem;
        border: 1px solid var(--border); text-transform: uppercase; letter-spacing: 0.5px;
    }

    /* Profiles (Nghệ thuật) */
    .profiles{display:grid;grid-template-columns:repeat(auto-fit, minmax(240px, 1fr));gap:32px;margin-top:32px}
    .profile{
        background:var(--card); padding: 0; border-radius: var(--radius); text-align:center;
        border: 1px solid var(--border); transition: all 0.3s ease-out; overflow: hidden; position: relative;
         box-shadow: var(--shadow-light);
    }
     .profile:hover { transform: translateY(-8px) scale(1.02); box-shadow: var(--shadow); }
    .profile-image-wrapper { position: relative; overflow: hidden; border-radius: var(--radius) var(--radius) 0 0;}
    .profile img{width:100%;height:220px;object-fit:cover; display: block; border-bottom: 1px solid var(--border); transition: transform 0.4s ease-out;}
    .profile:hover img { transform: scale(1.05); }
    .profile-content { padding: 24px; }
    .profile h4 { margin: 0 0 8px 0; font-family: var(--font-heading); font-size: 1.5rem; color: var(--text); }
    .profile .muted { font-size: 0.95rem; margin-bottom: 16px; line-height: 1.6; }


    /* Gallery */
    .gallery{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;margin-top:20px}
    .gallery button { position: relative; display: block; overflow: hidden; border-radius: var(--radius-sm); padding: 0; border: none; background: none; cursor: pointer;}
    .gallery img{width:100%;height:150px;object-fit:cover;border-radius:var(--radius-sm); border: 1px solid var(--border); transition: all 0.3s ease-out;}
    .gallery button::after { /* Overlay tối khi hover */
        content: '+'; position: absolute; inset: 0; background: rgba(var(--text-rgb, 58, 46, 39), 0.5);
        display: flex; align-items: center; justify-content: center; color: #fff; font-size: 2rem; font-weight: bold;
        opacity: 0; transition: opacity 0.3s ease-out; border-radius: var(--radius-sm);
    }
     :root { --text-rgb: 58, 46, 39; } [data-theme="dark"] { --text-rgb: 224, 218, 202; }
    .gallery button:hover img { transform: scale(1.05); filter: blur(2px); }
    .gallery button:hover::after { opacity: 1; }

    /* Sidebar Bên Phải */
    .aside .box{
        background:var(--card); padding: 32px; border-radius:var(--radius); margin-bottom:32px;
        border: 1px solid var(--border); box-shadow: var(--shadow-light); position: relative;
        overflow: hidden; /* Cho họa tiết nền */
    }
     .aside .box::before { /* Họa tiết nhẹ cho box */
         content: ''; position: absolute; inset: 0; background-image: var(--pattern);
         background-size: 70px 70px; opacity: 0.3; z-index: 0;
     }
     .aside .box > * { position: relative; z-index: 1; } /* Nội dung nổi lên trên họa tiết */

    .aside h4 {
        margin: 0 0 16px 0; font-family: var(--font-heading); font-size: 1.6rem;
        color: var(--text); padding-bottom: 12px; border-bottom: 1px solid var(--border);
        position: relative;
    }
     .aside h4::after { content: ''; position: absolute; bottom: -1px; left: 0; width: 50px; height: 3px; background-color: var(--primary); border-radius: 1.5px; }

    .aside ul { list-style: none; padding: 0; margin: 0; }
    .aside li { margin-bottom: 12px; }
    .aside a { font-weight: 500; font-size: 1rem; display: flex; align-items: center; gap: 8px;}
    .aside a span[aria-hidden="true"] { font-size: 0.8em; opacity: 0.7; } 
    .aside .muted { font-size: 0.95rem; line-height: 1.7; }

    /* Map Placeholder */
    .map-placeholder img { border-radius: var(--radius-sm); margin-bottom: 16px; border: 1px solid var(--border); box-shadow: 0 4px 10px rgba(0,0,0,0.06); }
    .map-placeholder p { font-size: 0.9rem; margin-top: 12px; }

    /* Timeline Strip */
    .timeline-strip{
        display:flex; gap:20px; overflow-x: auto; padding: 24px 8px; /* Tăng padding */
        margin: 24px -8px 0 -8px; scrollbar-width: thin; scrollbar-color: var(--muted) transparent;
        border-top: 1px solid var(--border); border-bottom: 1px solid var(--border); /* Thêm viền trên dưới */
        background: var(--glass); /* Nền nhẹ cho timeline */
    }
    .timeline-strip::-webkit-scrollbar { height: 10px; }
    .timeline-strip::-webkit-scrollbar-thumb { background-color: var(--accent); border-radius: 5px; border: 2px solid var(--glass); }
    [data-theme="dark"] .timeline-strip::-webkit-scrollbar-thumb { border-color: var(--glass); }


    .timeline-chip{ /* Giống thẻ tre cách điệu */
        min-width:190px; padding: 20px; border-radius: var(--radius-sm);
        background: var(--card); border: 1px solid var(--border); cursor:pointer;
        transition: all 0.25s ease-out; text-align: center;
        box-shadow: var(--shadow-light); flex-shrink: 0; position: relative;
    }
    .timeline-chip::before { /* Trang trí */
        content: ''; position: absolute; top: 10px; bottom: 10px; left: 8px; width: 3px;
        background-color: var(--accent); border-radius: 1.5px; opacity: 0.7;
    }
    .timeline-chip:hover { transform: translateY(-5px) scale(1.02); box-shadow: var(--shadow); border-color: var(--accent); }
    .timeline-chip .year { font-weight:700; color:var(--accent); display: block; margin-bottom: 8px; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.5px;}
    .timeline-chip .title { font-weight: 600; font-size: 1.05rem; color: var(--text); line-height: 1.4;}


    /* Modal */
    .modal{position:fixed;inset:0;background:rgba(26, 24, 22, 0.9); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); display:flex;align-items:center;justify-content:center;z-index:1001;display:none; padding: 24px; animation: fadeIn 0.3s ease-out;}
    .modal-card{
        background:var(--card); padding: 40px; /* Tăng padding */ border-radius:var(--radius);
        max-width:850px; /* Rộng hơn */ width:95%; max-height:90vh; overflow-y:auto;
        border: 1px solid var(--border); box-shadow: var(--shadow-dark);
        scrollbar-width: thin; scrollbar-color: var(--muted) var(--card); /* Màu scrollbar */
    }
    .modal-card::-webkit-scrollbar { width: 8px; }
    .modal-card::-webkit-scrollbar-thumb { background-color: var(--muted); border-radius: 4px; border: 2px solid var(--card);}

    .modal-header { display:flex;justify-content:space-between;align-items:flex-start;gap:16px; margin-bottom: 24px; padding-bottom: 20px; border-bottom: 1px solid var(--border); }
    .modal-header h3 { margin: 0; font-family: var(--font-heading); font-size: 2.8rem; color: var(--primary); line-height: 1.25; }
    .close-btn{background:transparent;border:0;font-size:32px;cursor:pointer; color: var(--muted); line-height: 1; padding: 0; transition: color 0.2s, transform 0.2s;}
    .close-btn:hover { color: var(--primary); transform: rotate(90deg); }

    .modal-body { margin-top: 28px; line-height: 1.8; font-size: 1.05rem; color: var(--text); }
    .modal-body::after { content: ""; display: table; clear: both; }
    .modal-body img {
        max-width: 350px; height: auto; float: left; margin: 4px 32px 16px 0;
        border-radius: var(--radius-sm); border: 1px solid var(--border);
        box-shadow: 0 6px 18px rgba(0,0,0,0.1);
    }
    .modal-body .meta { font-size: 0.95rem; color: var(--muted); margin-bottom: 16px; display: block; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px;}
    .modal-body .summary { font-weight: 600; margin-bottom: 20px; font-size: 1.25rem; color: var(--text); line-height: 1.6; font-family: var(--font-heading); font-style: italic;}
    .modal-body .content { margin-bottom: 24px; color: var(--muted); clear: left; }
    .modal-body .content p { margin-bottom: 1.3em; }
    .modal-footer { margin-top: 32px; padding-top: 24px; border-top: 1px solid var(--border); display:flex;gap:16px;justify-content:flex-end; }
    .modal-footer .icon-btn { padding: 12px; } /* Nút footer lớn hơn */

    /* Lightbox */
    #image-lightbox { background: rgba(18, 18, 16, 0.95); z-index: 1002; animation: fadeIn 0.25s ease-out;}
    #image-lightbox img { border: 5px solid var(--card); box-shadow: 0 20px 60px rgba(0,0,0,0.6);}

    /* Animation */
    @keyframes fadeIn { from { opacity: 0; transform: scale(0.98); } to { opacity: 1; transform: scale(1); } }


    /* Responsive */
    @media (max-width: 1250px) { /* Ẩn sidebar trái sớm hơn */
        :root { --sidebar-width: 0px; } /* Ẩn sidebar bằng cách thu nhỏ width */
        .left-sidebar { transform: translateX(-100%); width: 0; padding: 0; border: none;}
        .content-wrapper { margin-left: 0; }
        .sticky-header .wrap { max-width: none; } /* Header full width khi không có sidebar */
        #mobile-menu-toggle { display: flex !important; } /* Hiện nút mobile menu */
        .main-navigation { display: none; } /* Ẩn nav desktop */
    }
    @media (max-width: 992px) {
        .wrap { padding: 0 24px; }
        .grid{grid-template-columns:1fr}
        .aside { margin-top: 40px; }
        .page-header { margin-bottom: 32px; }
        h1.page-title { font-size: 4rem; }
        .page-subtitle { font-size: 1.1rem; }
        .section h2 { font-size: 2.8rem; }
    }
   
    @media (max-width: 480px) {
        body { padding-top: 60px; --header-height: 60px; font-size: 15px; }
        .wrap { padding: 0 12px; }
        .content-wrapper { padding: 16px; }
        .sticky-header { height: 60px; }
        h1.page-title { font-size: 2.5rem; }
        .page-subtitle { font-size: 0.95rem; }
        main.card { padding: 20px; }
        .controls-container { gap: 12px; margin-bottom: 24px; padding-bottom: 20px;}
        .search-bar { flex-direction: column; }
        .filters { gap: 8px; }
        .tag { padding: 8px 14px; font-size: 0.85rem; }
        .cards, .profiles { gap: 16px; }
        .card-item-image { height: 200px; } /* Giữ ảnh lớn hơn chút */
        .card-item-content { padding: 16px; }
        .card-item h3 { font-size: 1.4rem; }
        .profile img { height: 180px; }
        .profile-content { padding: 16px; }
        .profile h4 { font-size: 1.3rem; }
        .aside .box { padding: 20px; }
        .aside h4 { font-size: 1.4rem; }
        .gallery img { height: 110px; }
        .modal-card { padding: 16px; }
        .modal-header { margin-bottom: 16px; padding-bottom: 12px; }
        .modal-header h3 { font-size: 1.6rem; }
        .modal-body img { max-width: 100%; height: auto; float: none; margin: 0 0 16px 0; }
        .modal-body { font-size: 0.95rem; }
        .modal-footer { gap: 8px; }
        .btn { padding: 10px 18px; font-size: 0.9rem;}
        .icon-btn { padding: 10px; }
        .timeline-chip { min-width: 160px; padding: 16px;}
        .timeline-chip .title { font-size: 0.95rem;}
        .section h2 { font-size: 2rem; }
    }

    /* Focus styles */
    *:focus-visible {
        outline: 3px solid var(--accent); outline-offset: 3px; border-radius: 4px;
        box-shadow: 0 0 0 5px rgba(var(--accent-rgb, 180, 140, 71), 0.25);
    }
    :root { --accent-rgb: 180, 140, 71; } [data-theme="dark"] { --accent-rgb: 206, 168, 106; }
    *:focus:not(:focus-visible) { outline: none; }

    /* Helper class */
    .hidden { display: none !important; }
    .loading-placeholder { text-align: center; padding: 40px 0; font-style: italic; opacity: 0.7; }

/* === START: CSS Footer === */
    footer {
        margin-top: 64px;
        padding: 48px 0;
        background: var(--input-bg); /* Nền nhẹ cho footer */
        border-top: 1px solid var(--border);
        color: var(--muted);
        font-size: 0.95rem;
    }
    .footer-content {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        gap: 32px;
        max-width: var(--maxw); /* Sử dụng biến --maxw đã định nghĩa */
        margin: 0 auto;
        padding: 0 40px; /* Padding ngang khớp với .wrap */
        text-align: left;
    }
    .footer-column {
        flex: 1;
        min-width: 200px; /* Đảm bảo các cột không quá hẹp */
    }
    .footer-column h4 {
        font-family: var(--font-heading); /* Sử dụng font heading đã định nghĩa */
        font-size: 1.5rem;
        color: var(--text);
        margin: 0 0 16px 0;
        font-weight: 600;
    }
    .footer-column p, .footer-column a {
        color: var(--muted);
        text-decoration: none;
        display: block;
        margin-bottom: 10px;
        line-height: 1.6; /* Thêm line-height cho dễ đọc */
    }
    .footer-column a:hover {
        color: var(--primary); /* Sử dụng màu primary đã định nghĩa */
    }
    .footer-copyright {
        text-align: center;
        margin-top: 48px;
        padding-top: 24px;
        border-top: 1px dashed var(--border);
        font-size: 0.9rem;
    }
     /* Responsive cho footer */
    @media (max-width: 1024px) {
        .footer-content { padding: 0 24px; } /* Khớp padding wrap ở tablet */
    }
    @media (max-width: 768px) {
        .footer-content {
            flex-direction: column; /* Xếp chồng cột trên mobile */
            padding: 0 16px; /* Khớp padding wrap ở mobile nhỏ */
        }
    }
    @media (max-width: 480px) {
        .footer-content { padding: 0 12px; } /* Khớp padding wrap ở mobile rất nhỏ */
    }
    /* === END: CSS Footer === */
    /* === CSS Nút Chọn Ngôn Ngữ === */
.language-switcher {
    display: inline-flex; /* Dùng flex để căn chỉnh tốt hơn */
    align-items: center; /* Căn giữa theo chiều dọc */
    margin-left: 16px; /* Khoảng cách với phần tử trước đó */
    font-size: 0.85rem; /* Cỡ chữ nhỏ hơn một chút */
    color: var(--muted);
    border: 1px solid var(--border); /* Thêm viền nhẹ */
    border-radius: 99px; /* Bo tròn */
    padding: 2px; /* Khoảng đệm nhỏ bên trong */
    background-color: var(--input-bg); /* Nền nhẹ */
}
.lang-btn {
    background: none;
    border: none;
    padding: 4px 10px; /* Padding nút */
    cursor: pointer;
    font-weight: 500; /* Bỏ đậm mặc định */
    color: var(--muted);
    transition: all 0.2s ease-in-out;
    border-radius: 99px; /* Bo tròn nút */
    line-height: 1; /* Đảm bảo chiều cao nhất quán */
}
.lang-btn:hover {
    color: var(--primary);
    background-color: var(--glass-bg); /* Hiệu ứng kính khi hover */
}
.lang-btn.active {
    color: #fff; /* Chữ trắng khi active */
    font-weight: 600; /* Đậm hơn khi active */
    background-color: var(--primary); /* Nền màu chính khi active */
    box-shadow: 0 2px 8px rgba(var(--primary-rgb), 0.3); /* Đổ bóng nhẹ */
}
/* Thêm màu cho dấu | */
.language-switcher span {
    padding: 0 2px;
    color: var(--border);
}
/* === END CSS Nút Chọn Ngôn Ngữ === */
  </style>
</head>
<body>

  <div class="main-layout">
    <header class="sticky-header">
         <a href="trangchu.html" class="header-brand logo-image-mode" title="Dòng Chảy Lịch Sử Việt - Trang Chủ">
  <img src="images/dclsv.png" alt="Logo website" width="196" style="padding-top: 25px;"> </a>
            <nav class="main-navigation" aria-label="Điều hướng chính">
                 <ul>
                    <li><a href="trangchu.html">Trang Chủ</a></li>
                    <li><a href="lichsu.html">Lịch Sử</a></li>
                    <li><a href="dungnuocvagiunuoc.html" >Dựng Nước & Giữ Nước</a></li>
                    <li><a href="vanhoa.html" class="active-page">Văn Hóa</a></li>
                    <li><a href="khotulieu.html">Tư Liệu</a></li>
                    <li><a href="tintuc.html">Tin Tức</a></li>
                    <li><a href="lienhe.html">Liên Hệ & Góp ý</a></li>
                 </ul>
            </nav>
            <div class="header-actions">
                 <div class="language-switcher">
    <button id="lang-vi" class="lang-btn" data-lang="vi" data-translate-key="langVIE">VIE</button> |
    <button id="lang-en" class="lang-btn" data-lang="en" data-translate-key="langENG">ENG</button>
</div>
                 <button id="theme-toggle" class="icon-btn" title="Chuyển giao diện Sáng/Tối" aria-live="polite">
                 
                     <span class="theme-icon-light" aria-label="Chế độ sáng">☀️</span>
                     <span class="theme-icon-dark hidden" aria-label="Chế độ tối">🌙</span>
                 </button>
                  
            </div>
        
    </header>



    <div class="content-wrapper">
      <div class="wrap">
        <div class="page-header">
            <h1 class="page-title">Truyền thống & Văn hóa</h1>
            <p class="page-subtitle">Nơi hội tụ và lan tỏa những nét đẹp tinh hoa của Lễ hội, Phong tục, Nghệ thuật, Ẩm thực và Làng nghề Việt Nam qua dòng chảy thời gian.</p>
        </div>

        <main class="card" role="main">
          <div class="controls-container">
            <div class="search-bar" role="search" aria-label="Tìm trong trang">
              <input id="global-search" type="search" placeholder="Tìm kiếm tinh hoa văn hóa..." aria-label="Ô tìm kiếm"/>
              <button id="clear-search" class="icon-btn" title="Xóa tìm kiếm" aria-label="Xóa tìm kiếm">✕</button>
              <button id="show-bookmarks" class="icon-btn" title="Xem các mục đã lưu" aria-label="Xem mục đã lưu">★</button>
            </div>

            <div class="filters" role="tablist" aria-label="Bộ lọc danh mục">
              <button role="tab" aria-selected="true" class="tag active" data-filter="all">Tất cả</button>
              <button role="tab" aria-selected="false" class="tag" data-filter="festival">Lễ hội</button>
              <button role="tab" aria-selected="false" class="tag" data-filter="custom">Phong tục</button>
              <button role="tab" aria-selected="false" class="tag" data-filter="folk-art">Nghệ thuật</button>
              <button role="tab" aria-selected="false" class="tag" data-filter="cuisine">Ẩm thực</button>
              <button role="tab" aria-selected="false" class="tag" data-filter="craft">Làng nghề</button>
            </div>
          </div>

          <div class="grid">
            <div class="main-content">
              <section id="festivals" class="section" aria-labelledby="festivals-heading">
                <h2 id="festivals-heading">Lễ hội & Phong tục</h2>
                <p class="muted">Nghi lễ cộng đồng, tín ngưỡng dân gian và những nét sinh hoạt văn hóa đặc sắc qua các vùng miền.</p>
                <div class="cards" id="cards-list-festivals">
                  <p class="loading-placeholder muted">Đang tải dữ liệu...</p>
                </div>
                <div style="margin-top: 32px; text-align: center;">
                  <a href="#timeline" class="btn">Xem Dòng chảy Lễ hội <span aria-hidden="true" style="font-family: var(--font-body); font-weight: 400;">→</span></a>
                </div>
              </section>

              <section id="folk" class="section" aria-labelledby="folk-heading">
                <h2 id="folk-heading">Nghệ thuật Dân gian</h2>
                <p class="muted">Tinh hoa nghệ thuật truyền thống được lưu giữ và trình diễn qua nhiều thế hệ.</p>
                <div class="profiles" id="folk-list">
                   <p class="loading-placeholder muted">Đang tải dữ liệu...</p>
                </div>
              </section>

              <section id="cuisine" class="section" aria-labelledby="cuisine-heading">
                <h2 id="cuisine-heading">Ẩm thực & Làng nghề</h2>
                <p class="muted">Hương vị quê hương qua những món ăn đặc sản và sự khéo léo của các làng nghề thủ công.</p>
                <div class="cards" id="cards-list-cuisine">
                   <p class="loading-placeholder muted">Đang tải dữ liệu...</p>
                </div>
              </section>

              <section id="timeline" class="section" aria-labelledby="timeline-heading">
                <h2 id="timeline-heading">Dòng chảy Văn hoá & Lễ hội</h2>
                <div class="timeline-strip" id="timeline-strip" role="region" aria-label="Timeline các mục nổi bật">
                   <p class="loading-placeholder muted">Đang tải dữ liệu...</p>
                </div>
              </section>
            </div>

            <aside class="aside" aria-label="Thông tin thêm">
              <div class="aside-box box">
                <h4>Ảnh Nổi bật</h4>
                <div class="gallery" id="gallery">
                   <p class="loading-placeholder muted">Đang tải ảnh...</p>
                </div>
              </div>

               <div class="aside-box box map-placeholder">
                  <h4>Bản đồ Văn hóa Việt Nam</h4>
                  <a href="#" title="Xem bản đồ chi tiết (tính năng sắp có)">
                     <img src="https://cms.piklab.vn/resources/Tai%20nguyen%20Piklab/File%20design%20TMDT/piklab29h.jpg" alt="Bản đồ minh họa các vùng văn hóa Việt Nam" loading="lazy">
                  </a>
                  <p class="muted">Khám phá sự đa dạng văn hóa độc đáo trải dài theo hình chữ S.</p>
              </div>

              <div class="aside-box box">
                <h4>Liên kết Hữu ích</h4>
                <ul>
                  <li><a href="https://vietnam.travel/vi" target="_blank" rel="noopener noreferrer">Vietnam Travel <span aria-hidden="true">↗</span></a></li>
                  <li><a href="https://bvhttdl.gov.vn/" target="_blank" rel="noopener noreferrer">Bộ VHTTDL <span aria-hidden="true">↗</span></a></li>
                  <li><a href="https://dsvh.gov.vn/" target="_blank" rel="noopener noreferrer">Cục Di sản Văn hóa <span aria-hidden="true">↗</span></a></li>
                  <li><a href="https://vi.wikipedia.org/wiki/V%C4%83n_h%C3%B3a_Vi%E1%BB%87t_Nam" target="_blank" rel="noopener noreferrer">Wikipedia - Văn hóa VN <span aria-hidden="true">↗</span></a></li>
                </ul>
              </div>

              <div class="aside-box box">
                <h4>Hướng dẫn Khám phá</h4>
                <div class="muted">
                    Sử dụng bộ lọc hoặc ô tìm kiếm để đi sâu vào từng khía cạnh văn hóa. Nhấn <strong style="color: var(--primary)">Xem Chi Tiết</strong> để đọc thêm và <strong style="color: var(--primary)">★</strong> để lưu lại những giá trị bạn tâm đắc.
                </div>
              </div>
            </aside>
          </div>
        </main>
      </div>
    </div> </div> <div id="detail-modal" class="modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div class="modal-card">
      <div class="modal-header">
        <h3 id="modal-title">Tiêu đề</h3>
        <button id="modal-close" class="close-btn" aria-label="Đóng">✕</button>
      </div>
      <div id="modal-body" class="modal-body">
          <p class="loading-placeholder muted">Đang tải nội dung...</p>
      </div>
      <div class="modal-footer">
        <button id="modal-bookmark" class="icon-btn" data-id="">★ Lưu</button>
        <button id="modal-share" class="icon-btn" title="Sao chép liên kết">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line></svg>
            <span style="margin-left: 6px;">Chia sẻ</span>
        </button>
      </div>
    </div>
  </div>

   <div id="image-lightbox" style="position:fixed;inset:0;background:rgba(18, 18, 16, 0.95);display:flex;align-items:center;justify-content:center;z-index:1002;cursor:pointer; display: none; animation: fadeIn 0.25s ease-out;">
      <img src="" alt="Xem ảnh lớn" style="max-width:92%;max-height:92%;border-radius:var(--radius-sm); display:block; margin: auto; border: 5px solid var(--card); box-shadow: 0 20px 60px rgba(0,0,0,0.6);">
      <button aria-label="Đóng ảnh" style="position:absolute; top: 20px; right: 20px; font-size: 2rem; color: #fff; background:none; border:none; cursor:pointer;">&times;</button>
   </div>

  <script>
    // --- JavaScript Section (Giữ nguyên phần lớn logic, cập nhật selectors và theme toggle) ---
    (function(){
      // Sample dataset - Giữ nguyên
      const ITEMS = 
      [
  { id:'tet', type:'festival', title:'Tết Nguyên Đán', year:'Hàng năm', summary:'Lễ hội lớn nhất, mừng năm mới âm lịch, sum họp gia đình.', content:'Tết là dịp đoàn tụ, cúng tổ tiên, chúc tụng nhau những điều tốt đẹp.\nNhiều phong tục đặc sắc như gói bánh chưng, xông đất, lì xì, đi lễ chùa đầu năm.' , tags:['tết','cổ truyền','lễ hội'], image:'https://aeonmall-review-rikkei.cdn.vccloud.vn/public/wp/16/editors/wap1RWKGJLOKQwep63jTklEWDgC5T1OCyv553uAY.jpg'},
  { id:'mid-autumn', type:'festival', title:'Tết Trung Thu', year:'Rằm tháng 8 ÂL', summary:'Lễ hội của thiếu nhi với đèn lồng, múa lân, bánh trung thu.', content:'Trung Thu là dịp trẻ em vui chơi dưới trăng tròn với đèn ông sao, đèn lồng. Người lớn thì thưởng trăng, ăn bánh, uống trà.\nMúa lân sư rồng tạo không khí náo nhiệt.' , tags:['trung thu','thiếu nhi','lễ hội'], image:'https://upload.urbox.vn/strapi/nguon_goc_tet_trung_thu_tai_viet_nam_002_ec0f0a39e7.jpg'},
  { id:'hoi-lim', type:'festival', title:'Hội Lim', year:'Tháng Giêng ÂL', summary:'Lễ hội quan họ Bắc Ninh đặc sắc, hát đối đáp giao duyên.', content:'Hội Lim nổi tiếng với các liền anh, liền chị hát quan họ trên thuyền rồng, trên đồi Lim.\nLà di sản văn hóa phi vật thể của UNESCO.' , tags:['lễ hội','quan họ','Bắc Ninh'], image:'https://bcp.cdnchinhphu.vn/334894974524682240/2025/6/11/hoi-lim-e1453543168215-1749631292329374837403.jpg'},
  { id:'matruoc', type:'custom', title:'Tín ngưỡng thờ cúng tổ tiên', year:'Truyền thống', summary:'Nghi lễ thờ cúng ông bà, tổ tiên trong gia đình.', content:'Thể hiện lòng hiếu thảo, "uống nước nhớ nguồn".\nBàn thờ gia tiên là nơi trang trọng nhất trong nhà, thường có lễ cúng vào ngày giỗ, Tết.' , tags:['phong tục','tín ngưỡng', 'gia đình'], image:'https://admin.vov.gov.vn/UploadFolder/KhoTin/Images/UploadFolder/VOVVN/Images/sites/default/files/styles/large/public/2024-02/chuan_muc_tin_nguong_tho_cung_to_tien_cua_nguoi_viet.jpg'},
  { id:'cuoihoi', type:'custom', title:'Phong tục cưới hỏi', year:'Truyền thống', summary:'Các nghi lễ truyền thống trong việc kết hôn.', content:'Bao gồm nhiều lễ như dạm ngõ, ăn hỏi, đón dâu.\nTrang phục truyền thống như áo dài thường được sử dụng. Thể hiện sự gắn kết gia đình, cộng đồng.' , tags:['phong tục','cưới hỏi', 'gia đình'], image:'https://cdn.tienphong.vn/images/a6bf4f60924201126af6849ca45a398080f95d8f61b1684f50906e9fdf6b53abe1c04d511af8ed7e0791731f46f1c7d4a870a3db299a306d4e786a77ed548de3c0bd382c22d5e11b581388479382d385665f143bbdd11bb471bbc24cc391f487f93723069f5c9e54be65e78702575caa/384321540-668379545426790-7790401447915663041-n-1595.jpg'},
  { id:'cheo', type:'folk-art', title:'Nghệ thuật Chèo', year:'Truyền thống', summary:'Sân khấu dân gian Bắc Bộ với ca, múa, kịch.', content:'Chèo thường kể các câu chuyện cổ tích, lịch sử, đời thường với các làn điệu đặc trưng.\nCác nhân vật như hề chèo mang lại tiếng cười dí dỏm.' , tags:['chèo','sân khấu','dân gian'], image:'https://media.anhp.vn/files/XuanHa/XH-55011571921284.jpg'},
  { id:'caitao', type:'folk-art', title:'Nghệ thuật Cải lương', year:'Đầu TK 20', summary:'Sân khấu Nam Bộ kết hợp ca ra bộ và nhạc tài tử.', content:'Cải lương có nguồn gốc từ đờn ca tài tử Nam Bộ, phát triển mạnh mẽ vào thế kỷ 20.\nCác vở diễn thường có nội dung xã hội, lịch sử, tình cảm.' , tags:['cải lương','sân khấu', 'Nam Bộ'], image:'https://api.nongthonviet.com.vn/media/2025/04/26/680cd6a21b61c90a85e43124_vo_cai_luong__la_co_theu_sau_chu_vang_._anh__le_thuy_binh.(1)_high.jpg'},
  { id:'mua-roi-nuoc', type:'folk-art', title:'Múa rối nước', year:'Thế kỷ 11', summary:'Nghệ thuật múa rối độc đáo trên mặt nước.', content:'Các con rối gỗ được điều khiển khéo léo qua sào tre dưới nước, diễn các tích trò dân gian, lịch sử.\nThường biểu diễn ở các ao làng, hồ nước.' , tags:['rối nước','dân gian','sân khấu'], image:'https://www.vietnamairlines.com/~/media/SEO-images/2025%20SEO/Traffic%20TA/MB/Water%20Puppet%20Show%20Hanoi/water-puppet-show-hanoi-thumb.jpg'},
  { id:'phohanoi', type:'cuisine', title:'Phở Hà Nội', year:'Món ăn', summary:'Món phở bò/gà nổi tiếng với nước dùng trong, thơm.', content:'Phở là biểu tượng ẩm thực Việt Nam.\nPhở Hà Nội đặc trưng bởi nước dùng xương ninh kỹ, bánh phở mềm, thịt bò hoặc gà tươi ngon, ăn kèm rau thơm, chanh, ớt.' , tags:['ẩm thực','phở', 'Hà Nội'], image:'https://www.bonboncar.vn/blog/content/images/2025/08/pho-bo-ha-noi.jpeg'},
  { id:'banh-mi', type:'cuisine', title:'Bánh mì', year:'Món ăn', summary:'Bánh mì kẹp kiểu Việt Nam, đa dạng nhân.', content:'Kết hợp ổ bánh mì baguette Pháp với các loại nhân Việt Nam như pate, thịt nguội, thịt nướng, chả, rau dưa chua ngọt.\nLà món ăn đường phố phổ biến.' , tags:['ẩm thực','bánh mì','đường phố'], image:'https://vcdn1-dulich.vnecdn.net/2025/10/21/z7139679302136-c1f0d8c2350d7a3-8667-9814-1761024873.jpg?w=460&h=0&q=100&dpr=2&fit=crop&s=6CHRXzsXw9MIGB3ZGCpd7Q'},
  { id:'bat-trang', type:'craft', title:'Làng gốm Bát Tràng', year:'TK 14-15', summary:'Làng nghề gốm sứ cổ truyền nổi tiếng gần Hà Nội.', content:'Bát Tràng sản xuất đa dạng các sản phẩm gốm sứ từ đồ gia dụng đến đồ thờ cúng, mỹ nghệ.\nNổi tiếng với men trắng, hoa văn vẽ tay tinh xảo.' , tags:['làng nghề','gốm','Hà Nội'], image:'https://imgcdn.tapchicongthuong.vn/tcct-media/20/8/11/phu_nu_bat_trang.jpg'},
  { id:'non-la', type:'craft', title:'Làng nón lá', year:'Truyền thống', summary:'Nghề làm nón lá, biểu tượng của người phụ nữ Việt.', content:'Nón lá được làm thủ công từ lá cọ hoặc lá dừa, tre.\nNhiều làng nghề nổi tiếng như làng Chuông (Hà Nội), Tây Hồ (Huế). Nón bài thơ Huế có hoa văn ẩn hiện.' , tags:['làng nghề','nón lá', 'thủ công'], image:'https://statics.vinpearl.com/lang-non-chuong-3_1676478200.jpeg'}
];

      const GALLERY = ITEMS.sort(() => 0.5 - Math.random()).slice(0, 6).map(item => item.image);

      // Elements (Giữ nguyên)
      const htmlEl = document.documentElement;
      const cardsListFestivals = document.getElementById('cards-list-festivals');
      const folkList = document.getElementById('folk-list');
      const cardsListCuisine = document.getElementById('cards-list-cuisine');
      const galleryEl = document.getElementById('gallery');
      const timelineStrip = document.getElementById('timeline-strip');
      const searchInput = document.getElementById('global-search');
      const clearSearch = document.getElementById('clear-search');
      const filterTags = document.querySelectorAll('.filters .tag');
      const showBookmarksBtn = document.getElementById('show-bookmarks');
      const modal = document.getElementById('detail-modal');
      const modalCard = modal.querySelector('.modal-card');
      const modalTitle = document.getElementById('modal-title');
      const modalBody = document.getElementById('modal-body');
      const modalClose = document.getElementById('modal-close');
      const modalBookmark = document.getElementById('modal-bookmark');
      const modalShare = document.getElementById('modal-share');
      const lightbox = document.getElementById('image-lightbox');
      const lightboxImg = lightbox.querySelector('img');
      const placeholders = document.querySelectorAll('.loading-placeholder');
      const themeToggleBtn = document.getElementById('theme-toggle');
      const themeIconLight = themeToggleBtn.querySelector('.theme-icon-light');
      const themeIconDark = themeToggleBtn.querySelector('.theme-icon-dark');
      const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
      const mobileNavOverlay = document.getElementById('mobile-nav-overlay');
      const mobileNavClose = document.getElementById('mobile-nav-close');

      // Bookmarks localStorage - Giữ nguyên
      const BOOKMARK_KEY = 'dcl_vh_bookmarks_v5'; // Update key
      function getBookmarks(){ try{ return JSON.parse(localStorage.getItem(BOOKMARK_KEY)||'[]'); }catch(e){ return []; } }
      function saveBookmarks(list){ localStorage.setItem(BOOKMARK_KEY, JSON.stringify(list)); }

      // Render functions - Giữ nguyên logic cốt lõi, chỉ cần đảm bảo class CSS khớp
       function renderAll(filterText = '', filterType = 'all') { /* ... Code renderAll như trước ... */
          placeholders.forEach(p => p.classList.remove('hidden'));
          const q = filterText.trim().toLowerCase();
          const filtered = ITEMS.filter(it => {
              if (filterType !== 'all' && it.type !== filterType) return false;
              if (!q) return true;
              return (it.title + ' ' + (it.summary||'') + ' ' + (it.content||'') + ' ' + (it.tags?.join(' ')||'')).toLowerCase().includes(q);
          });
          const bookmarks = getBookmarks();

          const renderCard = (it) => {
              const isBookmarked = bookmarks.includes(it.id);
              return `
              <article class="card-item" data-id="${it.id}" aria-labelledby="card-title-${it.id}">
                  <a href="#" class="card-item-image-link btn-view" data-id="${it.id}" aria-hidden="true" tabindex="-1">
                     <img src="${it.image}" alt="${it.title}" class="card-item-image" loading="lazy">
                  </a>
                  <div class="card-item-content">
                      <h3><a href="#" class="btn-view" data-id="${it.id}" style="color: inherit; text-decoration: none;">${it.title}</a></h3>
                      <div class="meta">${getTypeLabel(it.type)} • ${it.year}</div>
                      <p class="description">${it.summary}</p>
                      <div class="badgelist">
                          ${(it.tags || []).map(t => `<span class="badge">${t}</span>`).join(' ')}
                      </div>
                      <div class="actions">
                          <div class="left">
                             <button class="btn btn-view" data-id="${it.id}">Xem Chi Tiết</button>
                          </div>
                          <button class="icon-btn btn-save" data-id="${it.id}" title="${isBookmarked ? 'Bỏ lưu' : 'Lưu mục này'}" aria-pressed="${isBookmarked}">
                              ${isBookmarked ? '✓' : '★'}
                          </button>
                      </div>
                  </div>
              </article>`;
          };

          const renderProfile = (it) => {
               const isBookmarked = bookmarks.includes(it.id);
               return `
              <article class="profile" data-id="${it.id}" aria-labelledby="profile-title-${it.id}">
                  <a href="#" class="btn-view" data-id="${it.id}" aria-hidden="true" tabindex="-1" style="display: block;">
                     <img src="${it.image}" alt="${it.title}" loading="lazy">
                  </a>
                  <div class="profile-content">
                    <h4><a href="#" class="btn-view" data-id="${it.id}" style="color: inherit; text-decoration: none;">${it.title}</a></h4>
                    <div class="muted">${it.summary}</div>
                    <div class="actions">
                        <button class="btn btn-view" data-id="${it.id}">Xem</button>
                        <button class="icon-btn btn-save" data-id="${it.id}" title="${isBookmarked ? 'Bỏ lưu' : 'Lưu mục này'}" aria-pressed="${isBookmarked}">
                            ${isBookmarked ? '✓' : '★'}
                        </button>
                    </div>
                  </div>
              </article>`;
          };

          // Simulate loading delay
          setTimeout(() => {
              cardsListFestivals.innerHTML = filtered.filter(it => ['festival', 'custom'].includes(it.type)).map(renderCard).join('') || `<p class="muted">Không tìm thấy Lễ hội hay Phong tục phù hợp.</p>`;
              folkList.innerHTML = filtered.filter(it => it.type === 'folk-art').map(renderProfile).join('') || `<p class="muted">Không tìm thấy Nghệ thuật dân gian phù hợp.</p>`;
              cardsListCuisine.innerHTML = filtered.filter(it => ['cuisine', 'craft'].includes(it.type)).map(renderCard).join('') || `<p class="muted">Không tìm thấy Ẩm thực hay Làng nghề phù hợp.</p>`;

              const timelineItemsHtml = filtered.filter(it=> ['festival','custom'].includes(it.type)).slice(0,10).map(it => `
                  <button class="timeline-chip" data-id="${it.id}" aria-label="Xem ${it.title}">
                      <span class="year">${it.year}</span>
                      <span class="title">${it.title}</span>
                  </button>`).join('');
              timelineStrip.innerHTML = timelineItemsHtml || `<p class="muted" style="padding: 0 10px;">Không có mục nào trong timeline.</p>`;

              placeholders.forEach(p => p.classList.add('hidden'));
          }, 100); // Giảm delay hơn nữa

          // Hide/Show sections
          setTimeout(() => {
              document.getElementById('festivals').style.display = cardsListFestivals.children.length === 0 || cardsListFestivals.children[0].tagName === 'P' ? 'none' : '';
              document.getElementById('folk').style.display = folkList.children.length === 0 || folkList.children[0].tagName === 'P' ? 'none' : '';
              document.getElementById('cuisine').style.display = cardsListCuisine.children.length === 0 || cardsListCuisine.children[0].tagName === 'P' ? 'none' : '';
              document.getElementById('timeline').style.display = timelineStrip.children.length === 0 || timelineStrip.children[0].tagName === 'P' ? 'none' : '';
          }, 110);
      }
      function getTypeLabel(type) { /* ... Giữ nguyên ... */
          switch(type) {
              case 'festival': return 'Lễ hội'; case 'custom': return 'Phong tục';
              case 'folk-art': return 'Nghệ thuật'; case 'cuisine': return 'Ẩm thực';
              case 'craft': return 'Làng nghề'; default: return type.charAt(0).toUpperCase() + type.slice(1);
          }
      }
      function renderGallery(){ /* ... Giữ nguyên ... */
        galleryEl.innerHTML = '';
        if (GALLERY.length === 0) { galleryEl.innerHTML = '<p class="muted">Không có ảnh.</p>'; return; }
        GALLERY.forEach(src=>{
          const button = document.createElement('button'); button.style='border:none;padding:0;background:none;display:block;width:100%;';
          button.setAttribute('aria-label', 'Xem ảnh lớn');
          const img = document.createElement('img'); img.src = src; img.alt = 'hình ảnh văn hóa Việt Nam'; img.loading = 'lazy';
          button.appendChild(img); galleryEl.appendChild(button);
        });
      }
      function openDetail(id){ /* ... Giữ nguyên logic, CSS mới sẽ tự style modal ... */
        const it = ITEMS.find(x=>x.id === id); if(!it) return;
        modalTitle.textContent = it.title;
        modalBody.innerHTML = `
            <img src="${it.image}" alt="${it.title}" loading="lazy">
            <span class="meta">${getTypeLabel(it.type)} • ${it.year}</span>
            <p class="summary">${it.summary}</p>
            <div class="content">${it.content.split('\n').map(p => p.trim() ? `<p>${p}</p>` : '').join('')}</div>
            <div class="badgelist">${(it.tags||[]).map(t=>`<span class="badge">${t}</span>`).join(' ')}</div>
            <div style="margin-top:20px; font-size: 0.9rem; clear:both;"><a href="detail.html?item=${encodeURIComponent(it.id)}" target="_blank" rel="noopener noreferrer">Xem trang chi tiết <span aria-hidden="true">↗</span></a></div>`;
        modal.style.display = 'flex'; document.body.style.overflow = 'hidden'; modal.setAttribute('aria-hidden','false'); modalCard.scrollTop = 0;
        const bms = getBookmarks(); const isBookmarked = bms.includes(it.id);
        modalBookmark.innerHTML = isBookmarked ? '✓ Bỏ lưu' : '★ Lưu'; modalBookmark.setAttribute('data-id', id);
        modalBookmark.setAttribute('title', isBookmarked ? 'Bỏ lưu mục này' : 'Lưu mục này'); modalBookmark.setAttribute('aria-pressed', isBookmarked);
        modalBookmark.style.display = ''; modalShare.style.display = ''; modalClose.focus();
      }
      function closeModal() { /* ... Giữ nguyên ... */
        modal.style.display='none'; document.body.style.overflow = ''; modal.setAttribute('aria-hidden','true');
        modalBookmark.style.display = ''; modalShare.style.display = '';
      }
      function openLightbox(src){ /* ... Giữ nguyên ... */
         lightboxImg.src = src; lightbox.style.display = 'flex'; document.body.style.overflow = 'hidden'; lightbox.focus();
      }
      function closeLightbox() { /* ... Giữ nguyên ... */
         lightbox.style.display = 'none'; if (modal.style.display !== 'flex') { document.body.style.overflow = ''; }
      }

      // Initialize
      renderAll();
      renderGallery();

      // --- Event Listeners ---

      // Centralized Click Listener - Giữ nguyên logic
      document.addEventListener('click', (e)=>{ /* ... Code xử lý click như trước ... */
          const target = e.target;
          const viewBtn = target.closest('.btn-view'); const saveBtn = target.closest('.btn-save');
          const galleryImgBtn = target.closest('.gallery button'); const timelineChip = target.closest('.timeline-chip');
          const closeModalBtn = target.closest('#modal-close'); const shareBtn = target.closest('#modal-share');
          const bookmarkLink = target.closest('.bookmark-link');
          const targetId = viewBtn?.dataset.id || saveBtn?.dataset.id || timelineChip?.dataset.id || bookmarkLink?.dataset.id;

          if (viewBtn || timelineChip || bookmarkLink) {
              e.preventDefault(); if (targetId) openDetail(targetId);
              if (bookmarkLink) { modalBookmark.style.display = ''; modalShare.style.display = ''; }
          }
          else if (saveBtn && targetId) {
              let list = getBookmarks(); const isBookmarked = list.includes(targetId);
              let newTextContent = isBookmarked ? '★' : '✓'; let newTitle = isBookmarked ? 'Lưu mục này' : 'Bỏ lưu';
              if (isBookmarked) { list = list.filter(x => x !== targetId); } else { list.push(targetId); }
              saveBookmarks(list);
              document.querySelectorAll(`.btn-save[data-id="${targetId}"]`).forEach(btn => {
                  btn.innerHTML = newTextContent; btn.setAttribute('title', newTitle); btn.setAttribute('aria-pressed', !isBookmarked);
              });
              if (modal.style.display === 'flex' && modalBookmark.getAttribute('data-id') === targetId) {
                   modalBookmark.innerHTML = isBookmarked ? '★ Lưu' : '✓ Bỏ lưu'; modalBookmark.setAttribute('title', isBookmarked ? 'Lưu mục này' : 'Bỏ lưu mục này'); modalBookmark.setAttribute('aria-pressed', !isBookmarked);
              }
          }
          else if (galleryImgBtn && galleryImgBtn.querySelector('img')) { openLightbox(galleryImgBtn.querySelector('img').src); }
          else if (closeModalBtn) { closeModal(); }
          else if (target === modal) { closeModal(); }
          else if (shareBtn) {
              const currentItemId = modalBookmark.getAttribute('data-id'); const item = ITEMS.find(x => x.id === currentItemId); if (!item) return;
              const url = location.href.split('?')[0].split('#')[0] + '?item=' + encodeURIComponent(item.id);
              const shareData = { title: item.title, text: item.summary, url: url };
              if(navigator.share && navigator.canShare(shareData)){ navigator.share(shareData).catch(err => console.error("Share failed:", err)); }
              else if (navigator.clipboard) { navigator.clipboard.writeText(url).then( ()=> alert('Đã sao chép liên kết!'), ()=> alert('Không thể tự sao chép. Liên kết:\n' + url) ).catch(()=> alert('Không thể sao chép. Liên kết:\n' + url)); }
              else { alert('Liên kết để chia sẻ:\n' + url); }
          }
      });

       // Keyboard accessibility - Giữ nguyên
       document.addEventListener('keydown', (e) => { /* ... Code xử lý keydown như trước ... */
           const target = e.target; const targetId = target.dataset.id;
           if ((e.key === 'Enter' || e.key === ' ') && targetId) {
               if (target.matches('.timeline-chip') || target.closest('.gallery button')) { e.preventDefault(); target.click(); }
               else if (target.matches('button:not([aria-expanded]):not([aria-haspopup]), .tag, a[href="#"]')) { e.preventDefault(); target.click(); } // Mở rộng cho nhiều loại nút hơn
           }
           else if (e.key === 'Escape'){
               if (modal.style.display === 'flex') { closeModal(); }
               else if (lightbox.style.display === 'flex') { closeLightbox(); }
               // Đóng mobile nav nếu đang mở
               else if (mobileNavOverlay.style.display === 'flex') { closeMobileNav(); }
           }
       });

      // Search & Filters Events - Giữ nguyên
      let searchTimeout;
      searchInput.addEventListener('input', ()=> {
          clearTimeout(searchTimeout);
          searchTimeout = setTimeout(() => {
              const activeTag = document.querySelector('.filters .tag.active');
              const type = activeTag ? activeTag.getAttribute('data-filter') : 'all';
              renderAll(searchInput.value, type);
          }, 350);
      });
      clearSearch.addEventListener('click', ()=> { searchInput.value=''; renderAll(); searchInput.focus(); });

      filterTags.forEach(t=>{
        t.addEventListener('click', ()=> {
          if (t.classList.contains('active')) return;
          filterTags.forEach(x=> { x.classList.remove('active'); x.setAttribute('aria-selected', 'false'); });
          t.classList.add('active');
          t.setAttribute('aria-selected', 'true');
          const typ = t.getAttribute('data-filter');
          renderAll(searchInput.value, typ);
        });
      });

      // Show Bookmarks Modal - Giữ nguyên logic, CSS mới sẽ style
      showBookmarksBtn.addEventListener('click', ()=>{ /* ... Code showBookmarksBtn như trước ... */
        const list = getBookmarks(); const bookmarkedItems = list.map(id => ITEMS.find(x => x.id === id)).filter(Boolean);
        modalTitle.textContent = `Đã lưu (${list.length})`;
        modalBody.innerHTML = bookmarkedItems.length > 0
            ? '<ul style="list-style: none; padding: 0;">' + bookmarkedItems.map(it =>
                `<li style="margin-bottom: 16px; padding-bottom: 16px; border-bottom: 1px solid var(--border); display: flex; align-items: center; gap: 16px;">
                   <img src="${it.image}" alt="" style="width: 80px; height: 60px; object-fit: cover; border-radius: 6px; flex-shrink: 0;">
                   <div style="flex-grow: 1;">
                     <a href="#" style="color: var(--primary); font-weight: 600; display: block; font-size: 1.1rem; text-decoration: none;" data-id="${it.id}" class="bookmark-link">${it.title}</a>
                     <span style="font-size: 0.9rem; color: var(--muted);">${getTypeLabel(it.type)}</span>
                   </div>
                   <button class="icon-btn btn-save" data-id="${it.id}" title="Bỏ lưu" aria-pressed="true" style="margin-left: auto; flex-shrink: 0;">✓</button>
                 </li>`).join('') + '</ul>'
            : '<p class="muted" style="text-align: center; padding: 20px 0;">Chưa có mục nào được lưu. Nhấn ★ trên các mục để lưu lại.</p>';
        modalBookmark.style.display = 'none'; modalShare.style.display = 'none'; modal.style.display = 'flex';
        document.body.style.overflow = 'hidden'; modal.setAttribute('aria-hidden','false'); modalClose.focus();
      });


      // Theme Toggle Functionality - Cập nhật icon
      function applyTheme(theme) {
          htmlEl.setAttribute('data-theme', theme);
          localStorage.setItem('dcl_theme_v5', theme); // Update key
          if (theme === 'dark') {
              themeIconLight.classList.add('hidden');
              themeIconDark.classList.remove('hidden');
          } else {
              themeIconLight.classList.remove('hidden');
              themeIconDark.classList.add('hidden');
          }
      }
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      const storedTheme = localStorage.getItem('dcl_theme_v5') || (prefersDark ? 'dark' : 'light');
      applyTheme(storedTheme);

      themeToggleBtn.addEventListener('click', ()=> {
        const newTheme = htmlEl.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
        applyTheme(newTheme);
      });

      // Handle direct link ?item=id - Giữ nguyên
      const urlParams = new URLSearchParams(window.location.search);
      const itemIdFromUrl = urlParams.get('item');
      if (itemIdFromUrl && ITEMS.find(i => i.id === itemIdFromUrl)) {
          requestAnimationFrame(() => requestAnimationFrame(() => openDetail(itemIdFromUrl)));
      }


    })();
  </script>
<footer>
      <div class="footer-content">
          <div class="footer-column">
              <h4>Giới thiệu</h4>
              <p>Trang web "Dòng Chảy Lịch Sử" cung cấp thông tin tóm tắt về lịch sử Việt Nam qua các thời kỳ, phục vụ mục đích tham khảo và học tập.</p>
          </div>
          <div class="footer-column">
              <h4>Liên hệ</h4>
              <a href="mailto:info@lichsuviet.vn">Email: info@lichsuviet.vn</a>
              <a href="tel:+84123456789">Điện thoại: (012) 345-6789</a>
              <p>Địa chỉ: 123 Đường ABC, Hà Nội</p>
          </div>
          <div class="footer-column">
              <h4>Hỗ trợ</h4>
              <a href="faq.html">Câu hỏi thường gặp</a>
              <a href="lienhe.html">Góp ý nội dung</a>
              <a href="policy.html">Chính sách bảo mật</a>
          </div>
      </div>
 <div class="wrap"> <div class="footer-copyright">
                 <p class="muted" style="color: red; font-weight: bold; font-size: 20px; text-align: center;">
  🇻🇳 Hoàng Sa, Trường Sa là của Việt Nam 🇻🇳
</p>

                        <p class="muted">© Dòng Chảy Lịch Sử Việt . Made by Bùi Lê Hậu . Thông tin tổng hợp cho mục đích tham khảo.</p>
                        
                    </div>
                </div>
  </footer>
</body>
</html>